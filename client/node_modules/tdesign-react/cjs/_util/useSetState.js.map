{"version":3,"file":"useSetState.js","sources":["../../src/_util/useSetState.ts"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nconst isFunction = (arg: unknown) => typeof arg === 'function';\n\n/**\n * 管理 object 类型 state 的 Hooks，用法与 class 组件的 this.setState 基本一致。\n * @param initialState\n * @returns [state, setMergeState]\n */\nconst useSetState = <T extends object>(\n  initialState: T = {} as T,\n): [T, (patch: Partial<T> | ((prevState: T) => Partial<T>)) => void] => {\n  const [state, setState] = useState<T>(initialState);\n\n  const setMergeState = useCallback((patch) => {\n    setState((prevState) => ({ ...prevState, ...(isFunction(patch) ? patch(prevState) : patch) }));\n  }, []);\n\n  return [state, setMergeState];\n};\n\nexport default useSetState;\n"],"names":["isFunction","arg","useSetState","initialState","useState","state","setState","setMergeState","useCallback","patch","prevState"],"mappings":";;;;;;;;;;;;;;;;;;;AACA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD;AAAA,SAAS,OAAOA,GAAP,KAAe,UAAxB;AAAA,CAAnB;;IACMC,WAAW,GAAG,SAAdA,WAAc,GAAuB;AAAA,MAAtBC,YAAsB,uEAAP,EAAO;;AACzC,kBAA0BC,cAAQ,CAACD,YAAD,CAAlC;AAAA;AAAA,MAAOE,KAAP;AAAA,MAAcC,QAAd;;AACA,MAAMC,aAAa,GAAGC,iBAAW,CAAC,UAACC,KAAD,EAAW;AAC3CH,IAAAA,QAAQ,CAAC,UAACI,SAAD;AAAA,6CAAqBA,SAArB,GAAmCV,UAAU,CAACS,KAAD,CAAV,GAAoBA,KAAK,CAACC,SAAD,CAAzB,GAAuCD,KAA1E;AAAA,KAAD,CAAR;AACD,GAFgC,EAE9B,EAF8B,CAAjC;AAGA,SAAO,CAACJ,KAAD,EAAQE,aAAR,CAAP;AACD;;;;"}