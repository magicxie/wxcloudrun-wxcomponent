{"version":3,"file":"Check.js","sources":["../../src/common/Check.tsx"],"sourcesContent":["import React, { Ref, forwardRef, useContext } from 'react';\nimport classNames from 'classnames';\nimport { omit } from '../_util/helper';\nimport { StyledProps } from '../common';\nimport useConfig from '../_util/useConfig';\nimport useDefault from '../_util/useDefault';\nimport { TdCheckboxProps } from '../checkbox/type';\n\nexport interface CheckProps extends TdCheckboxProps, StyledProps {\n  type: 'radio' | 'radio-button' | 'checkbox';\n  children?: React.ReactNode;\n}\n\n/**\n * Check 组件支持使用 CheckContext 进行状态托管\n */\nexport const CheckContext = React.createContext<CheckContextValue>(null);\n\n/**\n * 托管 Check 组件的状态，请提供 inject() 方法注入托管好的 props\n */\nexport interface CheckContextValue {\n  inject: (props: CheckProps) => CheckProps;\n}\n\nconst Check = forwardRef((_props: CheckProps, ref: Ref<HTMLLabelElement>) => {\n  // 支持从 Context 注入\n  const context = useContext(CheckContext);\n  const props = context ? context.inject(_props) : _props;\n\n  const {\n    type,\n    checked,\n    defaultChecked,\n    disabled,\n    name,\n    value,\n    onChange,\n    indeterminate,\n    children,\n    label,\n    className,\n    style,\n    ...htmlProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const [internalChecked, setInternalChecked] = useDefault(checked, defaultChecked, onChange);\n\n  const labelClassName = classNames(className, `${classPrefix}-${type}`, {\n    [`${classPrefix}-is-checked`]: internalChecked,\n    [`${classPrefix}-is-disabled`]: disabled,\n    [`${classPrefix}-is-indeterminate`]: indeterminate,\n  });\n\n  const input = (\n    <input\n      readOnly\n      type={type === 'radio-button' ? 'radio' : type}\n      className={`${classPrefix}-${type}__former`}\n      checked={internalChecked}\n      disabled={disabled}\n      name={name}\n      value={value}\n      onClick={(e) => e.stopPropagation()}\n      onChange={(e) => setInternalChecked(e.currentTarget.checked, { e })}\n    />\n  );\n\n  return (\n    <label ref={ref} className={labelClassName} style={style} {...omit(htmlProps, ['checkAll'])}>\n      {input}\n      <span className={`${classPrefix}-${type}__input`} />\n      <span key=\"label\" className={`${classPrefix}-${type}__label`}>\n        {children || label}\n      </span>\n    </label>\n  );\n});\n\nCheck.displayName = 'Check';\n\nexport default Check;\n"],"names":["CheckContext","React","createContext","Check","forwardRef","_props","ref","context","useContext","props","inject","type","checked","defaultChecked","disabled","name","value","onChange","indeterminate","children","label","className","style","htmlProps","useConfig","classPrefix","useDefault","internalChecked","setInternalChecked","labelClassName","classNames","input","createElement","readOnly","onClick","e","stopPropagation","currentTarget","omit","key","displayName"],"mappings":"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"}