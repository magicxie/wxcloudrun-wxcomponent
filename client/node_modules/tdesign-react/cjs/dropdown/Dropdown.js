/**
 * tdesign v0.22.1
 * (c) 2022 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var defineProperty = require('../_chunks/dep-449daca3.js');
var slicedToArray = require('../_chunks/dep-fa36e79f.js');
var React = require('react');
var classNames = require('classnames');
var toString = require('../_chunks/dep-7a0cfc4c.js');
var _baseClone = require('../_chunks/dep-35453ccd.js');
var _baseGet = require('../_chunks/dep-4f605641.js');
var _baseSlice = require('../_chunks/dep-c7adf4af.js');
var isPlainObject$1 = require('../_chunks/dep-552722c0.js');
var _flatRest = require('../_chunks/dep-a81e362c.js');
var _util_useConfig = require('../_util/useConfig.js');
var popup_index = require('../popup/index.js');
var dropdown_DropdownMenu = require('./DropdownMenu.js');
require('../_chunks/dep-045b87c1.js');
require('../_chunks/dep-0e3f1753.js');
require('../_chunks/dep-a7666a95.js');
require('../_chunks/dep-9125a75e.js');
require('../_chunks/dep-9c74d22d.js');
require('../_chunks/dep-48870ae5.js');
require('../_chunks/dep-c57ef5b6.js');
require('../_chunks/dep-20e76bfc.js');
require('../_chunks/dep-1bafebb1.js');
require('../_chunks/dep-735b841a.js');
require('../_chunks/dep-4a02b995.js');
require('../_chunks/dep-c5449fbe.js');
require('../_chunks/dep-c82d4aac.js');
require('../_chunks/dep-72511bfe.js');
require('../_chunks/dep-07d4a79b.js');
require('../_chunks/dep-fb89215e.js');
require('../_chunks/dep-69abf228.js');
require('../_chunks/dep-7d00ab60.js');
require('../_chunks/dep-f445e9bb.js');
require('../_chunks/dep-6681bc7b.js');
require('../_chunks/dep-55c2ba72.js');
require('../_chunks/dep-d2229c5d.js');
require('../_chunks/dep-9e6db8fb.js');
require('../config-provider/ConfigContext.js');
require('../locale/zh_CN.js');
require('../popup/Popup.js');
require('react-transition-group');
require('react-popper');
require('../_util/useDefault.js');
require('../_util/noop.js');
require('../_util/composeRefs.js');
require('../_util/usePrevious.js');
require('../popup/Portal.js');
require('react-dom');
require('../popup/hooks/useTriggerProps.js');
require('../_util/useClickOutside.js');
require('../popup/hooks/usePopupCssTransition.js');
require('../_chunks/dep-8f3deb2a.js');
require('./DropdownItem.js');
require('tdesign-icons-react');
require('../_util/useRipple.js');
require('../_util/setStyle.js');
require('../_util/helper.js');
require('../_chunks/dep-e03ca79d.js');
require('../_chunks/dep-3ca698ba.js');
require('../_chunks/dep-bc486aab.js');
require('../divider/index.js');
require('../divider/Divider.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var classNames__default = /*#__PURE__*/_interopDefaultLegacy(classNames);

/**
 * Gets the last element of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {*} Returns the last element of `array`.
 * @example
 *
 * _.last([1, 2, 3]);
 * // => 3
 */

function last$1(array) {
  var length = array == null ? 0 : array.length;
  return length ? array[length - 1] : undefined;
}

var last_1 = last$1;

var baseGet = _baseGet._baseGet,
    baseSlice = _baseSlice._baseSlice;
/**
 * Gets the parent value at `path` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} path The path to get the parent value of.
 * @returns {*} Returns the parent value.
 */

function parent$1(object, path) {
  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
}

var _parent = parent$1;

var castPath$1 = _baseGet._castPath,
    last = last_1,
    parent = _parent,
    toKey = _baseGet._toKey;
/**
 * The base implementation of `_.unset`.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {Array|string} path The property path to unset.
 * @returns {boolean} Returns `true` if the property is deleted, else `false`.
 */

function baseUnset$1(object, path) {
  path = castPath$1(path, object);
  object = parent(object, path);
  return object == null || delete object[toKey(last(path))];
}

var _baseUnset = baseUnset$1;

var isPlainObject = isPlainObject$1.isPlainObject_1;
/**
 * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain
 * objects.
 *
 * @private
 * @param {*} value The value to inspect.
 * @param {string} key The key of the property to inspect.
 * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.
 */

function customOmitClone$1(value) {
  return isPlainObject(value) ? undefined : value;
}

var _customOmitClone = customOmitClone$1;

var arrayMap = toString._arrayMap,
    baseClone = _baseClone._baseClone,
    baseUnset = _baseUnset,
    castPath = _baseGet._castPath,
    copyObject = _baseClone._copyObject,
    customOmitClone = _customOmitClone,
    flatRest = _flatRest._flatRest,
    getAllKeysIn = _baseClone._getAllKeysIn;
/** Used to compose bitmasks for cloning. */

var CLONE_DEEP_FLAG = 1,
    CLONE_FLAT_FLAG = 2,
    CLONE_SYMBOLS_FLAG = 4;
/**
 * The opposite of `_.pick`; this method creates an object composed of the
 * own and inherited enumerable property paths of `object` that are not omitted.
 *
 * **Note:** This method is considerably slower than `_.pick`.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The source object.
 * @param {...(string|string[])} [paths] The property paths to omit.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.omit(object, ['a', 'c']);
 * // => { 'b': '2' }
 */

var omit = flatRest(function (object, paths) {
  var result = {};

  if (object == null) {
    return result;
  }

  var isDeep = false;
  paths = arrayMap(paths, function (path) {
    path = castPath(path, object);
    isDeep || (isDeep = path.length > 1);
    return path;
  });
  copyObject(object, getAllKeysIn(object), result);

  if (isDeep) {
    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
  }

  var length = paths.length;

  while (length--) {
    baseUnset(result, paths[length]);
  }

  return result;
});
var omit_1 = omit;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty._defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

var Dropdown = function Dropdown(props) {
  var _props$popupProps = props.popupProps,
      popupProps = _props$popupProps === void 0 ? {} : _props$popupProps,
      disabled = props.disabled,
      _props$placement = props.placement,
      placement = _props$placement === void 0 ? "bottom-left" : _props$placement,
      _props$trigger = props.trigger,
      trigger = _props$trigger === void 0 ? "hover" : _props$trigger,
      _props$className = props.className,
      className = _props$className === void 0 ? "" : _props$className,
      children = props.children,
      _props$hideAfterItemC = props.hideAfterItemClick,
      hideAfterItemClick = _props$hideAfterItemC === void 0 ? true : _props$hideAfterItemC;

  var _useConfig = _util_useConfig["default"](),
      classPrefix = _useConfig.classPrefix;

  var _useState = React.useState(false),
      _useState2 = slicedToArray._slicedToArray(_useState, 2),
      isPopupVisible = _useState2[0],
      togglePopupVisible = _useState2[1];

  var dropdownClass = "".concat(classPrefix, "-dropdown");

  var handleMenuClick = function handleMenuClick(data, context) {
    var _props$onClick;

    if (hideAfterItemClick) {
      togglePopupVisible(false);
    }

    (_props$onClick = props.onClick) === null || _props$onClick === void 0 ? void 0 : _props$onClick.call(props, data, context);
  };

  var DropdownContent = function DropdownContent() {
    return /* @__PURE__ */React__default["default"].createElement(dropdown_DropdownMenu["default"], _objectSpread(_objectSpread({}, props), {}, {
      onClick: handleMenuClick
    }));
  };

  var handleVisibleChange = function handleVisibleChange(visible, context) {
    var _popupProps$onVisible;

    togglePopupVisible(visible);
    popupProps === null || popupProps === void 0 ? void 0 : (_popupProps$onVisible = popupProps.onVisibleChange) === null || _popupProps$onVisible === void 0 ? void 0 : _popupProps$onVisible.call(popupProps, visible, context);
  };

  var popupParams = _objectSpread({
    disabled: disabled,
    placement: placement,
    trigger: trigger,
    showArrow: false,
    overlayClassName: classNames__default["default"](dropdownClass, className),
    content: DropdownContent()
  }, omit_1(popupProps, "onVisibleChange"));

  return /* @__PURE__ */React__default["default"].createElement(popup_index.Popup, _objectSpread({
    expandAnimation: true,
    destroyOnClose: true,
    visible: isPopupVisible,
    onVisibleChange: handleVisibleChange
  }, popupParams), children);
};

Dropdown.displayName = "Dropdown";

exports["default"] = Dropdown;
//# sourceMappingURL=Dropdown.js.map
