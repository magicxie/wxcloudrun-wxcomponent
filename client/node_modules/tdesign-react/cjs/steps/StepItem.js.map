{"version":3,"file":"StepItem.js","sources":["../../src/steps/StepItem.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport classnames from 'classnames';\nimport { CloseIcon, CheckIcon } from 'tdesign-icons-react';\nimport useConfig from '../_util/useConfig';\nimport { TdStepItemProps } from './type';\nimport { StyledProps } from '../common';\nimport StepsContext from './StepsContext';\n\nexport interface StepItemProps extends TdStepItemProps, StyledProps {\n  /**\n   * Step的额外的内容以子元素的形式传入\n   */\n  children?: React.ReactNode;\n}\n\nexport default function StepItem(props: StepItemProps) {\n  const { icon, title, content, value, children, style } = props;\n  let { status } = props;\n\n  const { current, theme } = useContext(StepsContext);\n  const { classPrefix } = useConfig();\n\n  // 本步骤组件主动设定了状态，那么以此为准\n  if (!status) {\n    if (value < current) {\n      // 1. 本步骤序号小于当前步骤并且没有设定任何步骤序号，设定状态为 finish\n      status = 'finish';\n    } else if (value === current) {\n      // 2. 本步骤序号等于当前步骤. 默认为process\n      status = 'process';\n    } else {\n      // 3. 本步骤序号大于当前步骤，默认为wait\n      status = 'default';\n    }\n  }\n\n  const className = classnames({\n    [`${classPrefix}-steps-item`]: true,\n    [`${classPrefix}-steps-item--wait`]: status === 'default',\n    [`${classPrefix}-steps-item--error`]: status === 'error',\n    [`${classPrefix}-steps-item--finish`]: status === 'finish',\n    [`${classPrefix}-steps-item--process`]: status === 'process',\n    [props.className]: !!props.className,\n  });\n\n  const valueNum = Number(value);\n\n  // 步骤条每一步展示的图标\n  let iconEle = null;\n  // 1. 主动\n  // 用户自定义 icon 时优先级最高\n  if (icon) {\n    iconEle = icon;\n  } else if (theme === 'default') {\n    // 否则 根据 theme 决定是否展示默认 icon，dot 情况下不展示 icon\n    switch (status) {\n      case 'error':\n        iconEle = (\n          <span className={`${classPrefix}-steps-item__icon--number`}>\n            <CloseIcon />\n          </span>\n        );\n        break;\n      case 'finish':\n        iconEle = (\n          <span className={`${classPrefix}-steps-item__icon--number`}>\n            <CheckIcon />\n          </span>\n        );\n        break;\n      case 'default':\n      case 'process':\n        iconEle = (\n          <span className={`${classPrefix}-steps-item__icon--number`}>\n            {Number.isNaN(valueNum) ? value : valueNum + 1}\n          </span>\n        );\n        break;\n    }\n  } else {\n    iconEle = null;\n  }\n\n  return (\n    <div className={className} style={style}>\n      <div className={`${classPrefix}-steps-item__inner`}>\n        <div\n          className={`${classPrefix}-steps-item__icon ${status === 'finish' ? `${classPrefix}-steps-item-finish` : ''}`}\n        >\n          {iconEle}\n        </div>\n        <div className={`${classPrefix}-steps-item__content`}>\n          <div className={`${classPrefix}-steps-item__title`}>{title}</div>\n          <div className={`${classPrefix}-steps-item__description`}>{content}</div>\n          {children ? <div className={`${classPrefix}-steps-item__extra`}>{children}</div> : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nStepItem.displayName = 'StepItem';\n"],"names":["StepItem","props","icon","title","content","value","children","style","status","useContext","StepsContext","current","theme","useConfig","classPrefix","className","classnames","valueNum","Number","iconEle","React","createElement","CloseIcon","CheckIcon","isNaN","displayName"],"mappings":"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"}