/**
 * tdesign v0.22.1
 * (c) 2022 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var defineProperty = require('../_chunks/dep-449daca3.js');
var slicedToArray = require('../_chunks/dep-fa36e79f.js');
var React = require('react');
var dayjs = require('dayjs');
var classNames = require('classnames');
var _baseGetTag = require('../_chunks/dep-0e3f1753.js');
var tdesignIconsReact = require('tdesign-icons-react');
var _util_forwardRefWithStatics = require('../_util/forwardRefWithStatics.js');
var _util_useDefaultValue = require('../_util/useDefaultValue.js');
var _util_useConfig = require('../_util/useConfig.js');
var _util_noop = require('../_util/noop.js');
var popup_index = require('../popup/index.js');
var input_index = require('../input/index.js');
var timePicker_TimeRangePicker = require('./TimeRangePicker.js');
var timePicker_panel_TimePickerPanel = require('./panel/TimePickerPanel.js');
var timePicker_InputItems = require('./InputItems.js');
var timePicker_consts = require('./consts.js');
require('../_chunks/dep-045b87c1.js');
require('../_chunks/dep-a7666a95.js');
require('hoist-non-react-statics');
require('../_chunks/dep-e03ca79d.js');
require('../_util/useDefault.js');
require('../config-provider/ConfigContext.js');
require('../locale/zh_CN.js');
require('../popup/Popup.js');
require('react-transition-group');
require('react-popper');
require('../_util/composeRefs.js');
require('../_util/usePrevious.js');
require('../popup/Portal.js');
require('react-dom');
require('../popup/hooks/useTriggerProps.js');
require('../_util/useClickOutside.js');
require('../popup/hooks/usePopupCssTransition.js');
require('../input/Input.js');
require('../_chunks/dep-1bafebb1.js');
require('../_chunks/dep-735b841a.js');
require('../input/InputGroup.js');
require('./panel/TimePickerRangePanel.js');
require('./panel/SinglePanel.js');
require('../_chunks/dep-228a3548.js');
require('../_chunks/dep-8bb9b7ba.js');
require('../_chunks/dep-9c74d22d.js');
require('../_chunks/dep-48870ae5.js');
require('../_chunks/dep-99d6d655.js');
require('../_chunks/dep-7a0cfc4c.js');
require('../_chunks/dep-9125a75e.js');
require('../_chunks/dep-bc486aab.js');
require('../_chunks/dep-c7adf4af.js');
require('../_chunks/dep-942a7aba.js');
require('../_chunks/dep-5e46865d.js');
require('../_chunks/dep-059e74d9.js');
require('../_chunks/dep-6681bc7b.js');
require('../_chunks/dep-f445e9bb.js');
require('../_chunks/dep-72511bfe.js');
require('../_chunks/dep-7d00ab60.js');
require('./interfaces.js');
require('../button/index.js');
require('../button/Button.js');
require('../_util/useRipple.js');
require('../_util/setStyle.js');
require('../loading/index.js');
require('../loading/loading.js');
require('../_util/dom.js');
require('raf');
require('../_chunks/dep-0705da20.js');
require('../_util/easing.js');
require('../common/Portal.js');
require('../loading/gradient.js');
require('../loading/plugin.js');
require('../_chunks/dep-8f3deb2a.js');
require('../locale/LocalReceiver.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var dayjs__default = /*#__PURE__*/_interopDefaultLegacy(dayjs);
var classNames__default = /*#__PURE__*/_interopDefaultLegacy(classNames);

var customParseFormat$1 = {exports: {}};

(function (module, exports) {
  !function (t, e) {
    module.exports = e() ;
  }(_baseGetTag.commonjsGlobal, function () {

    var t,
        e = {
      LTS: "h:mm:ss A",
      LT: "h:mm A",
      L: "MM/DD/YYYY",
      LL: "MMMM D, YYYY",
      LLL: "MMMM D, YYYY h:mm A",
      LLLL: "dddd, MMMM D, YYYY h:mm A"
    },
        n = function n(t, _n) {
      return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (t, r, i) {
        var o = i && i.toUpperCase();
        return r || _n[i] || e[i] || _n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function (t, e, n) {
          return e || n.slice(1);
        });
      });
    },
        r = /(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,
        i = /\d\d/,
        o = /\d\d?/,
        s = /\d*[^\s\d-:/()]+/;

    var a = function a(t) {
      return function (e) {
        this[t] = +e;
      };
    },
        f = [/[+-]\d\d:?(\d\d)?/, function (t) {
      (this.zone || (this.zone = {})).offset = function (t) {
        if (!t) return 0;
        var e = t.match(/([+-]|\d\d)/g),
            n = 60 * e[1] + (+e[2] || 0);
        return 0 === n ? 0 : "+" === e[0] ? -n : n;
      }(t);
    }],
        u = function u(e) {
      var n = t[e];
      return n && (n.indexOf ? n : n.s.concat(n.f));
    },
        h = function h(e, n) {
      var r,
          i = t.meridiem;

      if (i) {
        for (var o = 1; o <= 24; o += 1) {
          if (e.indexOf(i(o, 0, n)) > -1) {
            r = o > 12;
            break;
          }
        }
      } else r = e === (n ? "pm" : "PM");

      return r;
    },
        d = {
      A: [s, function (t) {
        this.afternoon = h(t, !1);
      }],
      a: [s, function (t) {
        this.afternoon = h(t, !0);
      }],
      S: [/\d/, function (t) {
        this.milliseconds = 100 * +t;
      }],
      SS: [i, function (t) {
        this.milliseconds = 10 * +t;
      }],
      SSS: [/\d{3}/, function (t) {
        this.milliseconds = +t;
      }],
      s: [o, a("seconds")],
      ss: [o, a("seconds")],
      m: [o, a("minutes")],
      mm: [o, a("minutes")],
      H: [o, a("hours")],
      h: [o, a("hours")],
      HH: [o, a("hours")],
      hh: [o, a("hours")],
      D: [o, a("day")],
      DD: [i, a("day")],
      Do: [s, function (e) {
        var n = t.ordinal,
            r = e.match(/\d+/);
        if (this.day = r[0], n) for (var i = 1; i <= 31; i += 1) {
          n(i).replace(/\[|\]/g, "") === e && (this.day = i);
        }
      }],
      M: [o, a("month")],
      MM: [i, a("month")],
      MMM: [s, function (t) {
        var e = u("months"),
            n = (u("monthsShort") || e.map(function (t) {
          return t.substr(0, 3);
        })).indexOf(t) + 1;
        if (n < 1) throw new Error();
        this.month = n % 12 || n;
      }],
      MMMM: [s, function (t) {
        var e = u("months").indexOf(t) + 1;
        if (e < 1) throw new Error();
        this.month = e % 12 || e;
      }],
      Y: [/[+-]?\d+/, a("year")],
      YY: [i, function (t) {
        t = +t, this.year = t + (t > 68 ? 1900 : 2e3);
      }],
      YYYY: [/\d{4}/, a("year")],
      Z: f,
      ZZ: f
    };

    var c = function c(e, i, o) {
      try {
        var s = function (e) {
          for (var i = (e = n(e, t && t.formats)).match(r), o = i.length, s = 0; s < o; s += 1) {
            var a = i[s],
                f = d[a],
                u = f && f[0],
                h = f && f[1];
            i[s] = h ? {
              regex: u,
              parser: h
            } : a.replace(/^\[|\]$/g, "");
          }

          return function (t) {
            for (var e = {}, n = 0, r = 0; n < o; n += 1) {
              var s = i[n];
              if ("string" == typeof s) r += s.length;else {
                var a = s.regex,
                    f = s.parser,
                    u = t.substr(r),
                    h = a.exec(u)[0];
                f.call(e, h), t = t.replace(h, "");
              }
            }

            return function (t) {
              var e = t.afternoon;

              if (void 0 !== e) {
                var n = t.hours;
                e ? n < 12 && (t.hours += 12) : 12 === n && (t.hours = 0), delete t.afternoon;
              }
            }(e), e;
          };
        }(i)(e),
            a = s.year,
            f = s.month,
            u = s.day,
            h = s.hours,
            c = s.minutes,
            m = s.seconds,
            l = s.milliseconds,
            M = s.zone,
            Y = new Date(),
            v = u || (a || f ? 1 : Y.getDate()),
            p = a || Y.getFullYear(),
            D = 0;

        a && !f || (D = f > 0 ? f - 1 : Y.getMonth());
        var y = h || 0,
            L = c || 0,
            g = m || 0,
            $ = l || 0;
        return M ? new Date(Date.UTC(p, D, v, y, L, g, $ + 60 * M.offset * 1e3)) : o ? new Date(Date.UTC(p, D, v, y, L, g, $)) : new Date(p, D, v, y, L, g, $);
      } catch (t) {
        return new Date("");
      }
    };

    return function (e, n, r) {
      r.p.customParseFormat = !0;
      var i = n.prototype,
          o = i.parse;

      i.parse = function (e) {
        var n = e.date,
            i = e.utc,
            s = e.args;
        this.$u = i;
        var a = s[1];

        if ("string" == typeof a) {
          var f = !0 === s[2],
              u = !0 === s[3],
              h = f || u,
              d = s[2];
          u && (d = s[2]), f || (t = d ? r.Ls[d] : this.$locale()), this.$d = c(n, a, i), this.init(), d && !0 !== d && (this.$L = this.locale(d).$L), h && n !== this.format(a) && (this.$d = new Date("")), t = void 0;
        } else if (a instanceof Array) for (var m = a.length, l = 1; l <= m; l += 1) {
          s[1] = a[l - 1];
          var M = r.apply(this, s);

          if (M.isValid()) {
            this.$d = M.$d, this.$L = M.$L, this.init();
            break;
          }

          l === m && (this.$d = new Date(""));
        } else o.call(this, e);
      };
    };
  });
})(customParseFormat$1);

var customParseFormat = customParseFormat$1.exports;

dayjs__default["default"].extend(customParseFormat);
var TimePicker = _util_forwardRefWithStatics["default"](function (props, ref) {
  var _classNames;

  var TEXT_CONFIG = timePicker_consts.useTimePickerTextConfig();

  var _useDefaultValue = _util_useDefaultValue["default"](props),
      allowInput = _useDefaultValue.allowInput,
      className = _useDefaultValue.className,
      clearable = _useDefaultValue.clearable,
      disabled = _useDefaultValue.disabled,
      _useDefaultValue$form = _useDefaultValue.format,
      format = _useDefaultValue$form === void 0 ? timePicker_consts.DEFAULT_FORMAT : _useDefaultValue$form,
      _useDefaultValue$hide = _useDefaultValue.hideDisabledTime,
      hideDisabledTime = _useDefaultValue$hide === void 0 ? true : _useDefaultValue$hide,
      _useDefaultValue$plac = _useDefaultValue.placeholder,
      placeholder = _useDefaultValue$plac === void 0 ? TEXT_CONFIG.placeholder : _useDefaultValue$plac,
      style = _useDefaultValue.style,
      _useDefaultValue$size = _useDefaultValue.size,
      size = _useDefaultValue$size === void 0 ? "medium" : _useDefaultValue$size,
      _useDefaultValue$step = _useDefaultValue.steps,
      steps = _useDefaultValue$step === void 0 ? timePicker_consts.DEFAULT_STEPS : _useDefaultValue$step,
      value = _useDefaultValue.value,
      disableTime = _useDefaultValue.disableTime,
      _useDefaultValue$onBl = _useDefaultValue.onBlur,
      onBlur = _useDefaultValue$onBl === void 0 ? _util_noop["default"] : _useDefaultValue$onBl,
      onChange = _useDefaultValue.onChange,
      _useDefaultValue$onCl = _useDefaultValue.onClose,
      onClose = _useDefaultValue$onCl === void 0 ? _util_noop["default"] : _useDefaultValue$onCl,
      _useDefaultValue$onFo = _useDefaultValue.onFocus,
      onFocus = _useDefaultValue$onFo === void 0 ? _util_noop["default"] : _useDefaultValue$onFo,
      _useDefaultValue$onIn = _useDefaultValue.onInput,
      onInput = _useDefaultValue$onIn === void 0 ? _util_noop["default"] : _useDefaultValue$onIn,
      _useDefaultValue$onOp = _useDefaultValue.onOpen,
      onOpen = _useDefaultValue$onOp === void 0 ? _util_noop["default"] : _useDefaultValue$onOp;

  var _useState = React.useState(false),
      _useState2 = slicedToArray._slicedToArray(_useState, 2),
      isPanelShowed = _useState2[0],
      setPanelShow = _useState2[1];

  var _useConfig = _util_useConfig["default"](),
      classPrefix = _useConfig.classPrefix;

  var name = "".concat(classPrefix, "-time-picker");
  var inputClasses = classNames__default["default"]("".concat(name, "__group"), (_classNames = {}, defineProperty._defineProperty(_classNames, "".concat(classPrefix, "-is-focused"), isPanelShowed), defineProperty._defineProperty(_classNames, "".concat(classPrefix, "-input--focused"), isPanelShowed), _classNames));

  var handleShowPopup = function handleShowPopup(visible, context) {
    setPanelShow(visible);
    visible ? onOpen(context) : onClose(context);
  };

  var handleClear = function handleClear(context) {
    var e = context.e;
    e.stopPropagation();
    onChange(null);
  };

  return /* @__PURE__ */React__default["default"].createElement(popup_index.Popup, {
    content: /* @__PURE__ */React__default["default"].createElement(timePicker_panel_TimePickerPanel["default"], {
      steps: steps,
      format: format,
      disableTime: disableTime,
      hideDisabledTime: hideDisabledTime,
      isFooterDisplay: true,
      onChange: onChange,
      handleConfirmClick: function handleConfirmClick(value2) {
        onChange(dayjs__default["default"](value2).format(format));
        setPanelShow(false);
      },
      value: value
    }),
    disabled: disabled,
    visible: isPanelShowed,
    onVisibleChange: handleShowPopup,
    overlayClassName: classNames__default["default"]("".concat(name, "__panel-container")),
    placement: "bottom-left",
    trigger: "click",
    expandAnimation: true
  }, /* @__PURE__ */React__default["default"].createElement("div", {
    className: classNames__default["default"](name, className),
    ref: ref,
    style: style
  }, /* @__PURE__ */React__default["default"].createElement(input_index.Input, {
    readonly: true,
    disabled: disabled,
    size: size,
    clearable: clearable,
    value: value ? " " : void 0,
    onClear: handleClear,
    placeholder: !value ? placeholder : void 0,
    className: inputClasses,
    suffixIcon: /* @__PURE__ */React__default["default"].createElement(tdesignIconsReact.TimeIcon, null)
  }), value ? /* @__PURE__ */React__default["default"].createElement(timePicker_InputItems["default"], {
    disabled: disabled,
    format: format,
    allowInput: allowInput,
    value: [value],
    onBlur: onBlur,
    onFocus: onFocus,
    onInput: onInput,
    onChange: onChange
  }) : null));
}, {
  displayName: "TimePicker",
  TimeRangePicker: timePicker_TimeRangePicker["default"]
});

exports["default"] = TimePicker;
//# sourceMappingURL=TimePicker.js.map
