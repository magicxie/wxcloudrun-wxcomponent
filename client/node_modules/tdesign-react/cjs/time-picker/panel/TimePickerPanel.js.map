{"version":3,"file":"TimePickerPanel.js","sources":["../../../src/time-picker/panel/TimePickerPanel.tsx"],"sourcesContent":["import React, { FC, useMemo } from 'react';\nimport dayjs from 'dayjs';\nimport SinglePanel, { SinglePanelProps } from './SinglePanel';\n\nimport useConfig from '../../_util/useConfig';\nimport Button from '../../button';\n\nimport { DEFAULT_STEPS, DEFAULT_FORMAT, useTimePickerTextConfig } from '../consts';\n\nexport interface TimePickerPanelProps extends SinglePanelProps {\n  // 是否展示footer\n  isFooterDisplay?: boolean;\n  handleConfirmClick?: (defaultValue: dayjs.Dayjs) => void;\n}\n\nconst TimePickerPanel: FC<TimePickerPanelProps> = (props) => {\n  const {\n    isFooterDisplay,\n    onChange,\n    format = DEFAULT_FORMAT,\n    steps = DEFAULT_STEPS,\n    handleConfirmClick,\n    value,\n  } = props;\n  const { classPrefix } = useConfig();\n\n  const TEXT_CONFIG = useTimePickerTextConfig();\n\n  const panelClassName = `${classPrefix}-time-picker__panel`;\n  const showNowTimeBtn = !!steps.filter((v) => v > 1).length;\n\n  const defaultValue = useMemo(() => {\n    const isStepsSet = !!steps.filter((v) => v > 1).length;\n    if (value) {\n      return dayjs(value, format);\n    }\n    if (isStepsSet) {\n      return dayjs().hour(0).minute(0).second(0);\n    }\n    return dayjs();\n  }, [value, format, steps]);\n\n  return (\n    <div className={panelClassName}>\n      <div className={`${panelClassName}-section-body`}>\n        <SinglePanel {...props} format={format} steps={steps} value={value} />\n      </div>\n      {isFooterDisplay ? (\n        <div className={`${panelClassName}-section-footer`}>\n          <Button\n            theme=\"primary\"\n            variant=\"base\"\n            onClick={() => {\n              handleConfirmClick(defaultValue);\n            }}\n          >\n            {TEXT_CONFIG.confirm}\n          </Button>\n          {!showNowTimeBtn ? (\n            <Button theme=\"primary\" variant=\"text\" onClick={() => onChange(dayjs().format(format))}>\n              {TEXT_CONFIG.nowtime}\n            </Button>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default TimePickerPanel;\n"],"names":["TimePickerPanel","props","isFooterDisplay","onChange","format","DEFAULT_FORMAT","steps","DEFAULT_STEPS","handleConfirmClick","value","useConfig","classPrefix","TEXT_CONFIG","useTimePickerTextConfig","panelClassName","showNowTimeBtn","filter","v","length","defaultValue","useMemo","isStepsSet","dayjs","hour","minute","second","React","createElement","className","SinglePanel","Button","theme","variant","onClick","confirm","nowtime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AACjC,MACEC,eADF,GAOID,KAPJ,CACEC,eADF;AAAA,MAEEC,QAFF,GAOIF,KAPJ,CAEEE,QAFF;AAAA,sBAOIF,KAPJ,CAGEG,MAHF;AAAA,MAGEA,MAHF,8BAGWC,gCAHX;AAAA,qBAOIJ,KAPJ,CAIEK,KAJF;AAAA,MAIEA,KAJF,6BAIUC,+BAJV;AAAA,MAKEC,kBALF,GAOIP,KAPJ,CAKEO,kBALF;AAAA,MAMEC,KANF,GAOIR,KAPJ,CAMEQ,KANF;;AAQA,mBAAwBC,0BAAS,EAAjC;AAAA,MAAQC,WAAR,cAAQA,WAAR;;AACA,MAAMC,WAAW,GAAGC,yCAAuB,EAA3C;AACA,MAAMC,cAAc,aAAMH,WAAN,wBAApB;AACA,MAAMI,cAAc,GAAG,CAAC,CAACT,KAAK,CAACU,MAAN,CAAa,UAACC,CAAD;AAAA,WAAOA,CAAC,GAAG,CAAX;AAAA,GAAb,EAA2BC,MAApD;AACA,MAAMC,YAAY,GAAGC,aAAO,CAAC,YAAM;AACjC,QAAMC,UAAU,GAAG,CAAC,CAACf,KAAK,CAACU,MAAN,CAAa,UAACC,CAAD;AAAA,aAAOA,CAAC,GAAG,CAAX;AAAA,KAAb,EAA2BC,MAAhD;;AACA,QAAIT,KAAJ,EAAW;AACT,aAAOa,yBAAK,CAACb,KAAD,EAAQL,MAAR,CAAZ;AACD;;AACD,QAAIiB,UAAJ,EAAgB;AACd,aAAOC,yBAAK,GAAGC,IAAR,CAAa,CAAb,EAAgBC,MAAhB,CAAuB,CAAvB,EAA0BC,MAA1B,CAAiC,CAAjC,CAAP;AACD;;AACD,WAAOH,yBAAK,EAAZ;AACD,GAT2B,EASzB,CAACb,KAAD,EAAQL,MAAR,EAAgBE,KAAhB,CATyB,CAA5B;AAUA,wBAAuBoB,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChDC,IAAAA,SAAS,EAAEd;AADqC,GAA3B,iBAEJY,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC5CC,IAAAA,SAAS,YAAKd,cAAL;AADmC,GAA3B,iBAEAY,yBAAK,CAACC,aAAN,CAAoBE,uCAApB,kCACd5B,KADc;AAEjBG,IAAAA,MAAM,EAANA,MAFiB;AAGjBE,IAAAA,KAAK,EAALA,KAHiB;AAIjBG,IAAAA,KAAK,EAALA;AAJiB,KAFA,CAFI,EASlBP,eAAe,kBAAmBwB,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChEC,IAAAA,SAAS,YAAKd,cAAL;AADuD,GAA3B,iBAEpBY,yBAAK,CAACC,aAAN,CAAoBG,mBAApB,EAA4B;AAC7CC,IAAAA,KAAK,EAAE,SADsC;AAE7CC,IAAAA,OAAO,EAAE,MAFoC;AAG7CC,IAAAA,OAAO,EAAE,mBAAM;AACbzB,MAAAA,kBAAkB,CAACW,YAAD,CAAlB;AACD;AAL4C,GAA5B,EAMhBP,WAAW,CAACsB,OANI,CAFoB,EAQd,CAACnB,cAAD,kBAAkCW,yBAAK,CAACC,aAAN,CAAoBG,mBAApB,EAA4B;AACrFC,IAAAA,KAAK,EAAE,SAD8E;AAErFC,IAAAA,OAAO,EAAE,MAF4E;AAGrFC,IAAAA,OAAO,EAAE;AAAA,aAAM9B,QAAQ,CAACmB,yBAAK,GAAGlB,MAAR,CAAeA,MAAf,CAAD,CAAd;AAAA;AAH4E,GAA5B,EAIxDQ,WAAW,CAACuB,OAJ4C,CAAlC,GAIC,IAZa,CAAnB,GAYc,IArBX,CAAvB;AAsBD;;;;"}