{"version":3,"file":"file-list.js","sources":["../../../../src/upload/themes/flow-list/file-list.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { CheckCircleFilledIcon, ErrorCircleFilledIcon, TimeFilledIcon } from 'tdesign-icons-react';\nimport { abridgeName, returnFileSize } from '../../util';\nimport useConfig from '../../../_util/useConfig';\nimport Loading from '../../../loading';\nimport type { CommonListProps, FlowListProps } from './index';\nimport type { UploadFile } from '../../type';\n\ntype FileListProps = CommonListProps & Pick<FlowListProps, 'showUploadProgress' | 'remove'>;\n\nconst FileList = (props: FileListProps) => {\n  const { listFiles, showInitial, renderDragger, showUploadProgress, remove } = props;\n  const { classPrefix: prefix } = useConfig();\n  const UPLOAD_NAME = `${prefix}-upload`;\n  const renderStatus = (file: UploadFile) => {\n    const STATUS_MAP = {\n      success: {\n        icon: <CheckCircleFilledIcon />,\n        text: '上传成功',\n      },\n      fail: {\n        icon: <ErrorCircleFilledIcon />,\n        text: '上传失败',\n      },\n      progress: {\n        icon: <Loading />,\n        text: `上传中 ${Math.min(file.percent, 99)}%`,\n      },\n      waiting: {\n        icon: <TimeFilledIcon />,\n        text: '待上传',\n      },\n    };\n\n    if (file.status === 'progress' && !showUploadProgress) return null;\n    return (\n      <div className={`${UPLOAD_NAME}__flow-status`}>\n        {STATUS_MAP[file.status].icon}\n        <span>{STATUS_MAP[file.status].text}</span>\n      </div>\n    );\n  };\n\n  return (\n    <table className={`${UPLOAD_NAME}__flow-table`}>\n      <thead>\n        <tr>\n          <th>文件名</th>\n          <th>大小</th>\n          <th>状态</th>\n          <th>操作</th>\n        </tr>\n      </thead>\n      <tbody>\n        {showInitial && (\n          <tr>\n            <td colSpan={4}>{renderDragger()}</td>\n          </tr>\n        )}\n        {listFiles.map((file, index) => (\n          <tr key={index}>\n            <td>{abridgeName(file.name, 7, 10)}</td>\n            <td>{returnFileSize(file.size)}</td>\n            <td>{renderStatus(file)}</td>\n            <td>\n              <span\n                className={`${UPLOAD_NAME}__flow-button`}\n                onClick={(e: MouseEvent<HTMLElement>) => remove({ e, index, file })}\n              >\n                删除\n              </span>\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default FileList;\n"],"names":["FileList","props","listFiles","showInitial","renderDragger","showUploadProgress","remove","useConfig","prefix","classPrefix","UPLOAD_NAME","renderStatus","file","STATUS_MAP","success","icon","React","createElement","CheckCircleFilledIcon","text","fail","ErrorCircleFilledIcon","progress","Loading","Math","min","percent","waiting","TimeFilledIcon","status","className","colSpan","map","index","key","abridgeName","name","returnFileSize","size","onClick","e"],"mappings":"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"}