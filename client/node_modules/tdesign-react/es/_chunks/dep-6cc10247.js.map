{"version":3,"file":"dep-6cc10247.js","sources":["../../src/radio/RadioGroup.tsx","../../src/radio/Radio.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\nimport { TdRadioGroupProps } from './type';\nimport useDefault from '../_util/useDefault';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport { CheckContext, CheckContextValue } from '../common/Check';\nimport Radio from './Radio';\n/**\n * RadioGroup 组件所接收的属性\n */\nexport interface RadioGroupProps extends TdRadioGroupProps {\n  children?: ReactNode;\n}\n\n/**\n * 单选选项组，里面可以嵌套 <Radio />\n */\nconst RadioGroup = (props: RadioGroupProps) => {\n  const { classPrefix } = useConfig();\n  const {\n    disabled,\n    children,\n    value,\n    defaultValue,\n    onChange,\n    size = 'medium',\n    variant = 'outline',\n    options = [],\n  } = props;\n\n  const [internalValue, setInternalValue] = useDefault(value, defaultValue, onChange);\n  const [barStyle, setBarStyle] = useState({});\n  const groupRef = useRef(null);\n  const { SIZE: sizeMap } = useCommonClassName();\n\n  const context: CheckContextValue = {\n    inject: (checkProps) => {\n      // 如果已经受控，则不注入\n      if (typeof checkProps.checked !== 'undefined') {\n        return checkProps;\n      }\n\n      const { value: checkValue } = checkProps;\n\n      return {\n        ...checkProps,\n        checked: internalValue === checkProps.value,\n        disabled: checkProps.disabled || disabled,\n        onChange(checked, { e }) {\n          if (typeof checkProps.onChange === 'function') {\n            checkProps.onChange(checked, { e });\n          }\n\n          setInternalValue(checkValue, { e });\n        },\n      };\n    },\n  };\n\n  function calcBarStyle() {\n    if (!variant.includes('filled')) return;\n\n    const checkedRadioCls = `.${classPrefix}-radio-button.${classPrefix}-is-checked`;\n    const checkedRadio = groupRef.current.querySelector(checkedRadioCls);\n    if (!checkedRadio) return;\n    const { offsetWidth, offsetLeft } = checkedRadio;\n    setBarStyle({ width: `${offsetWidth}px`, left: `${offsetLeft}px` });\n  }\n\n  useEffect(() => {\n    calcBarStyle();\n  }, [internalValue]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const renderBlock = () => {\n    if (!variant.includes('filled')) return null;\n\n    return <div style={barStyle} className={`${classPrefix}-radio-group__bg-block`}></div>;\n  };\n\n  const renderOptions = () =>\n    options.map((item) => {\n      if (typeof item === 'string' || typeof item === 'number') {\n        return (\n          <Radio value={item} key={item}>\n            {item}\n          </Radio>\n        );\n      }\n      return (\n        <Radio value={item.value} key={item.value} disabled={item.disabled}>\n          {item.label}\n        </Radio>\n      );\n    });\n\n  return (\n    <CheckContext.Provider value={context}>\n      <div\n        ref={groupRef}\n        className={classNames(`${classPrefix}-radio-group`, sizeMap[size], {\n          [`${classPrefix}-radio-group__outline`]: variant === 'outline',\n          [`${classPrefix}-radio-group--filled`]: variant.includes('filled'),\n          [`${classPrefix}-radio-group--primary-filled`]: variant === 'primary-filled',\n        })}\n      >\n        {children || renderOptions()}\n        {renderBlock()}\n      </div>\n    </CheckContext.Provider>\n  );\n};\n\nRadioGroup.displayName = 'RadioGroup';\n\nexport default RadioGroup;\n","import React, { Ref, forwardRef } from 'react';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport Check, { CheckProps } from '../common/Check';\nimport RadioGroup from './RadioGroup';\n\nexport type RadioProps = Omit<CheckProps, 'type'>;\n\nconst Radio = forwardRefWithStatics(\n  (props: RadioProps, ref: Ref<HTMLLabelElement>) => <Check ref={ref} type=\"radio\" {...props} />,\n  {\n    Group: RadioGroup,\n    Button: forwardRef((props: RadioProps, ref: Ref<HTMLLabelElement>) => (\n      <Check ref={ref} type=\"radio-button\" {...props} />\n    )),\n  },\n);\n\nRadio.displayName = 'Radio';\n\nexport default Radio;\n"],"names":["RadioGroup","props","useConfig","classPrefix","disabled","children","value","defaultValue","onChange","size","variant","options","useDefault","internalValue","setInternalValue","useState","barStyle","setBarStyle","groupRef","useRef","useCommonClassName","sizeMap","SIZE","context","inject","checkProps","checked","checkValue","e","calcBarStyle","includes","checkedRadioCls","checkedRadio","current","querySelector","offsetWidth","offsetLeft","width","left","useEffect","renderBlock","React","createElement","style","className","renderOptions","map","item","Radio","key","label","CheckContext","Provider","ref","classNames","displayName","forwardRefWithStatics","Check","type","Group","Button","forwardRef"],"mappings":"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"}