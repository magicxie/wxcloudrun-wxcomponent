{"version":3,"file":"Calendar.js","sources":["../../src/calendar/Calendar.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback, useEffect, useLayoutEffect, forwardRef } from 'react';\nimport dayjs from 'dayjs';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport Button from '../button';\nimport Select from '../select';\nimport Radio from '../radio';\nimport noop from '../_util/noop';\nimport useConfig from '../_util/useConfig';\nimport { TdCalendarProps, ControllerOptions, CalendarCell, CalendarValue } from './type';\nimport { StyledProps } from '../common';\nimport { createDateList, createMonthList } from './_util';\nimport CheckTag from '../tag/CheckTag';\n\nexport interface CalendarProps extends TdCalendarProps, StyledProps {}\n\nexport interface CalendarMethods {\n  /**\n   * 显示当前月份\\年份\n   */\n  toCurrent: (value: CalendarValue) => void;\n}\n\nconst getDefaultControllerConfigData = (visible = true): Record<string, any> => ({\n  visible, // 是否显示（全部控件）\n  disabled: false, // 是否禁用（全部控件）\n  // 模式切换单选组件设置\n  mode: {\n    visible: true, // 是否显示\n    radioGroupProps: {}, // 用于透传props给该radioGroup组件\n  },\n  // 年份选择框组件相关设置\n  year: {\n    visible: true, // 是否显示\n    selectProps: { popupProps: { overlayStyle: { width: '110px' } } }, // 用于透传props给该select组件\n  },\n  // 年份选择框组件相关设置\n  month: {\n    visible: true, // 是否显示（“year”模式下本身是不显示该组件的）\n    selectProps: { popupProps: { overlayStyle: { width: '90px' } } }, // 用于透传props给该select组件\n  },\n  // 隐藏\\显示周末按钮组件相关设置\n  weekend: {\n    visible: true, // 是否显示\n    showWeekendButtonProps: {}, // 用于透传props给显示周末按钮组件\n    hideWeekendButtonProps: {}, // 用于透传props给隐藏周末按钮组件\n  },\n  // “今天\\本月”按钮组件相关设置\n  current: {\n    visible: true, // 是否显示\n    currentDayButtonProps: {}, // 用于透传props给“今天”钮组件（“month”模式下有效）\n    currentMonthButtonProps: {}, // 用于透传props给“本月”按钮组件（“year”模式下有效）\n  },\n});\n\n// 抽取配置常量\nconst blockName = 'calendar'; // 类名前缀\nconst controlSectionSize = 'medium'; // 操作栏控件尺寸\nconst minYear = 1970; // 最早选择年份\n\nconst Calendar: React.FC<CalendarProps> = forwardRef((props, ref: React.MutableRefObject<CalendarMethods>) => {\n  const {\n    className = '',\n    style = {},\n    mode: modeFromProps = 'month',\n    value: valueFromProps = null,\n    firstDayOfWeek = 1,\n    format = 'YYYY-MM-DD',\n    range = null,\n    head = null,\n    cell = null,\n    cellAppend = null,\n    week = null,\n    theme = 'full',\n    controllerConfig,\n    isShowWeekendDefault = true,\n    preventCellContextmenu = false,\n    onControllerChange = noop,\n    onCellClick = noop,\n    onCellDoubleClick = noop,\n    onCellRightClick = noop,\n    onMonthChange = noop,\n    fillWithZero = false,\n  } = props;\n\n  // 组装配置信息\n  const controllerConfigData =\n    typeof controllerConfig === 'boolean'\n      ? getDefaultControllerConfigData(controllerConfig)\n      : { ...getDefaultControllerConfigData(), ...controllerConfig };\n\n  // 读配置信息\n  const {\n    visible,\n    disabled,\n    mode: modeFromConfig,\n    year: yearFromConfig,\n    month: monthFromConfig,\n    weekend,\n    current,\n  } = controllerConfigData;\n  const { visible: visibleForMode = true, radioGroupProps: radioGroupPropsForMode = {} } = modeFromConfig;\n  const { visible: visibleForYear = true, selectProps: selectPropsForYear = {} } = yearFromConfig;\n  const { visible: visibleForMonth = true, selectProps: selectPropsForMonth = {} } = monthFromConfig;\n  const { visible: visibleForWeekendToggle = true, showWeekendButtonProps = {}, hideWeekendButtonProps = {} } = weekend;\n  const { visible: visibleForCurrent = true, currentDayButtonProps = {}, currentMonthButtonProps = {} } = current;\n\n  const { classPrefix } = useConfig();\n  const [mode, setMode] = useState<string>('month');\n  const [value, setValue] = useState<dayjs.Dayjs>(dayjs(valueFromProps || dayjs().format('YYYY-MM-DD')));\n  const [year, setYearState] = useState<number>(value.year());\n  const [month, setMonthState] = useState<number>(parseInt(value.format('M'), 10));\n  const [isShowWeekend, setIsShowWeekend] = useState<boolean>(isShowWeekendDefault);\n\n  const [local, t] = useLocaleReceiver('calendar');\n\n  // 月份年份变更\n  const setMonth = useCallback(\n    (newMonth) => {\n      setMonthState(newMonth);\n      onMonthChange({ month: String(newMonth), year: String(year) });\n    },\n    [onMonthChange, year],\n  );\n  const setYear = (newYear) => {\n    setYearState(newYear);\n  };\n\n  // 表头数组\n  const weekLabelList = t(local.week).split(',');\n  const colHeaderList = useMemo(() => {\n    if (mode === 'year') return [];\n    const weekTextArr = Array.isArray(week) && week.length >= 7 ? week : [...weekLabelList];\n    const list = [];\n    for (let i = firstDayOfWeek; i <= 7; i++) {\n      if (!isShowWeekend && i > 5) {\n        break;\n      }\n      list.push({\n        day: i,\n        text: weekTextArr[i - 1],\n      });\n    }\n    if (firstDayOfWeek > 1) {\n      for (let i = 1; i < firstDayOfWeek; i++) {\n        if (!isShowWeekend && i > 5) {\n          break;\n        }\n        list.push({\n          day: i,\n          text: weekTextArr[i - 1],\n        });\n      }\n    }\n    return list;\n  }, [mode, firstDayOfWeek, isShowWeekend, week, weekLabelList]);\n\n  // 根据传入的 range 参数生成 key 为 from, to 的范围对象\n  const rangeFromTo = useMemo(() => {\n    if (!range || range.length < 2) {\n      return null;\n    }\n    const [v1, v2] = range;\n    if (dayjs(v1).isBefore(dayjs(v2))) {\n      return {\n        from: v1,\n        to: v2,\n      };\n    }\n    return {\n      from: v2,\n      to: v1,\n    };\n  }, [range]);\n\n  // 构造基础 controllerOptions\n  const controllerOptions: ControllerOptions = useMemo(() => {\n    const dayJsFilterDate: dayjs.Dayjs = dayjs(`${year}-${month}`);\n    const re = {\n      filterDate: dayJsFilterDate.toDate(),\n      formattedFilterDate: dayJsFilterDate.format(format),\n      mode,\n      isShowWeekend,\n    };\n    return re;\n  }, [isShowWeekend, mode, year, month, format]);\n\n  // 年份、月份 Select 选择框选项\n  const [yearSelectList, monthSelectList] = useMemo(() => {\n    const isRangeValid = rangeFromTo && rangeFromTo.from && rangeFromTo.to;\n    const checkMonthSelectorDisabled = (yearIn: number, monthIn: number): boolean => {\n      if (isRangeValid) {\n        const beginYear = dayjs(rangeFromTo.from).year();\n        const endYear = dayjs(rangeFromTo.to).year();\n        if (yearIn === beginYear) {\n          const beginMon = parseInt(dayjs(rangeFromTo.from).format('M'), 10);\n          return monthIn < beginMon;\n        }\n        if (yearIn === endYear) {\n          const endMon = parseInt(dayjs(rangeFromTo.to).format('M'), 10);\n          return monthIn > endMon;\n        }\n      }\n      return false;\n    };\n\n    const yearList = [];\n    const monthList = [];\n    // 年列表\n    const yearBegin = isRangeValid ? dayjs(rangeFromTo.from).year() : Math.max(minYear, year - 10);\n    const yearEnd = isRangeValid ? dayjs(rangeFromTo.to).year() : Math.max(minYear, year + 10);\n    for (let i = yearBegin; i <= yearEnd; i++) {\n      yearList.push({\n        value: i,\n        disabled: checkMonthSelectorDisabled(i, month),\n      });\n    }\n    // 月列表\n    for (let i = 1; i <= 12; i++) {\n      monthList.push({\n        value: i,\n        disabled: checkMonthSelectorDisabled(year, i),\n      });\n    }\n\n    return [yearList, monthList];\n  }, [rangeFromTo, year, month]);\n\n  // mode为 'month' 时，构造日历列表\n  const dateList = useMemo<CalendarCell[][]>(\n    () => createDateList(year, month, firstDayOfWeek, value, format),\n    [year, month, firstDayOfWeek, format, value],\n  );\n\n  // mode为 'year' 时，构造月历列表\n  const monthList = useMemo<CalendarCell[][]>(() => createMonthList(year, value, format), [year, value, format]);\n\n  const prefixCls = useCallback(\n    (...args: (string | [string, string?, string?])[]) => {\n      let className = '';\n      args.forEach((item, index) => {\n        if (item && index > 0) className = className.concat(' ');\n        if (item instanceof Array) {\n          const [block, element, modifier] = item;\n          className = className.concat(classPrefix, '-', block);\n          if (element) className = className.concat('__', element);\n          if (modifier) className = className.concat('--', modifier);\n        } else if (typeof item === 'string') {\n          className = className.concat(classPrefix, '-', item);\n        }\n      });\n      return className;\n    },\n    [classPrefix],\n  );\n\n  // 将基础的 CalendarCell 与 ControllerOptions 进行合并\n  const createCalendarCell = useCallback(\n    (cellData: CalendarCell): CalendarCell => ({\n      ...cellData,\n      ...controllerOptions,\n    }),\n    [controllerOptions],\n  );\n\n  const toCurrent = useCallback(\n    (valueIn = null) => {\n      const now: dayjs.Dayjs = dayjs(valueIn).isValid() ? dayjs(valueIn) : dayjs(dayjs().format('YYYY-MM-DD'));\n      setValue(now);\n      setYear(now.year());\n      setMonth(parseInt(now.format('M'), 10));\n    },\n    [setMonth],\n  );\n\n  React.useImperativeHandle(ref, () => ({ toCurrent }), [toCurrent]);\n\n  // 事件回调统一处理\n  const execCellEvent = useCallback(\n    (event, calendarCell, handleFunc) => {\n      if (handleFunc && typeof handleFunc === 'function') {\n        handleFunc({\n          cell: createCalendarCell(calendarCell),\n          e: event,\n        });\n      }\n    },\n    [createCalendarCell],\n  );\n\n  const clickCell = useCallback(\n    (event, calendarCell: CalendarCell) => {\n      setValue(dayjs(calendarCell.formattedDate));\n\n      execCellEvent(event, calendarCell, onCellClick);\n    },\n    [onCellClick, execCellEvent],\n  );\n\n  const doubleClickCell = useCallback(\n    (event, calendarCell: CalendarCell) => {\n      execCellEvent(event, calendarCell, onCellDoubleClick);\n    },\n    [onCellDoubleClick, execCellEvent],\n  );\n\n  const rightClickCell = useCallback(\n    (event, calendarCell: CalendarCell) => {\n      if (preventCellContextmenu) event.preventDefault();\n      execCellEvent(event, calendarCell, onCellRightClick);\n    },\n    [onCellRightClick, execCellEvent, preventCellContextmenu],\n  );\n\n  useEffect(() => {\n    toCurrent(valueFromProps);\n  }, [valueFromProps, toCurrent]);\n\n  useEffect(() => {\n    setMode(modeFromProps);\n  }, [modeFromProps]);\n\n  useEffect(() => {\n    setIsShowWeekend(isShowWeekendDefault);\n  }, [isShowWeekendDefault]);\n\n  useLayoutEffect(() => {\n    onControllerChange(controllerOptions);\n  }, [onControllerChange, controllerOptions]);\n\n  /**\n   * 将 month 映射为文字输出\n   * @param month 月份下标值（起始值为0）\n   */\n  const monthLabelList = t(local.cellMonth).split(',');\n  const getMonthCN = (month: number): string => monthLabelList[month];\n\n  const fix0 = (num: number) => {\n    const fillZero = num < 10 && (fillWithZero ?? local.fillWithZero ?? true);\n    return fillZero ? `0${num}` : num;\n  };\n\n  return (\n    <div className={prefixCls(blockName, [blockName, '', theme]).concat(' ', className)} style={style}>\n      {/* 操作部分 */}\n      {visible && (\n        <div className={prefixCls([blockName, 'control'])}>\n          <div className={prefixCls([blockName, 'title'])}>\n            {(() => {\n              if (head && typeof head === 'function') return head(controllerOptions);\n              if (head && typeof head !== 'function') return head;\n            })()}\n          </div>\n          <div className={prefixCls([blockName, 'control-section'])}>\n            {/* 年份选择框 */}\n            <div className={prefixCls([blockName, 'control-section-cell'])}>\n              {visibleForYear && (\n                <Select\n                  size={controlSectionSize}\n                  disabled={disabled}\n                  value={year}\n                  options={yearSelectList.map((item) => ({\n                    label: t(local.yearSelection, { year: item.value }),\n                    value: item.value,\n                    disabled: item.disabled,\n                  }))}\n                  onChange={(selectYear) => setYear(selectYear as number)}\n                  {...selectPropsForYear}\n                />\n              )}\n            </div>\n            {/* 月份选择框 */}\n            <div className={prefixCls([blockName, 'control-section-cell'])}>\n              {visibleForMonth && mode === 'month' && (\n                <Select\n                  size={controlSectionSize}\n                  disabled={disabled}\n                  value={month}\n                  options={monthSelectList.map((item) => ({\n                    label: t(local.monthSelection, { month: item.value }),\n                    value: item.value,\n                    disabled: item.disabled,\n                  }))}\n                  onChange={(selectMonth) => setMonth(selectMonth as number)}\n                  {...selectPropsForMonth}\n                />\n              )}\n            </div>\n          </div>\n          {/* 模式切换 */}\n          <div className={prefixCls([blockName, 'control-section'])} style={{ height: 'auto' }}>\n            {visibleForMode && (\n              <Radio.Group\n                variant=\"default-filled\"\n                size={controlSectionSize}\n                value={mode}\n                disabled={disabled}\n                onChange={(value) => setMode(value as string)}\n                {...radioGroupPropsForMode}\n              >\n                <Radio.Button value=\"month\">{t(local.monthRadio)}</Radio.Button>\n                <Radio.Button value=\"year\">{t(local.yearRadio)}</Radio.Button>\n              </Radio.Group>\n            )}\n          </div>\n          {/* 周末隐藏显示切换 */}\n          {mode === 'month' && theme === 'full' && visibleForWeekendToggle && (\n            <div className={prefixCls([blockName, 'control-section'])}>\n              <CheckTag\n                className=\"t-calendar__control-tag\"\n                theme={isShowWeekend ? 'default' : 'primary'}\n                size={controlSectionSize}\n                disabled={disabled}\n                onClick={() => {\n                  setIsShowWeekend(!isShowWeekend);\n                }}\n                {...(isShowWeekend ? hideWeekendButtonProps : showWeekendButtonProps)}\n              >\n                {`${isShowWeekend ? t(local.hideWeekend) : t(local.showWeekend)}`}\n              </CheckTag>\n            </div>\n          )}\n          {/* 回到当前按钮 */}\n          {theme === 'full' && visibleForCurrent && (\n            <div className={prefixCls([blockName, 'control-section'])}>\n              <Button\n                size={controlSectionSize}\n                disabled={disabled}\n                onClick={toCurrent}\n                {...(mode === 'year' ? currentMonthButtonProps : currentDayButtonProps)}\n              >\n                {mode === 'year' ? t(local.thisMonth) : t(local.today)}\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n      {/* 主体部分 */}\n      <div className={prefixCls([blockName, 'panel'], [blockName, `panel--${mode}`])}>\n        <table className={prefixCls([blockName, 'table'])}>\n          {/* 表头部分 */}\n          {colHeaderList.length > 0 && (\n            <thead className={prefixCls([blockName, 'table-head'])}>\n              <tr className={prefixCls([blockName, 'table-head-row'])}>\n                {colHeaderList.map((item) => (\n                  <th key={item.day} className={prefixCls([blockName, 'table-head-cell'])}>\n                    {week && typeof week === 'function' ? week({ day: item.day }) : item.text}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n          )}\n          {/* month 模式，输出日期 */}\n          {mode === 'month' && (\n            <tbody className={prefixCls([blockName, 'table-body'])}>\n              {dateList.map((dateRow, dateRowIndex) => (\n                <tr key={String(dateRowIndex)} className={prefixCls([blockName, 'table-body-row'])}>\n                  {dateRow.map((dateCell, dateCellIndex) => {\n                    if (!isShowWeekend && [6, 7].indexOf(dateCell.day) >= 0) return null;\n                    const isNow = dateCell.formattedDate === dayjs().format('YYYY-MM-DD');\n                    return (\n                      <td\n                        key={String(dateCellIndex)}\n                        className={prefixCls(\n                          [blockName, 'table-body-cell'],\n                          dateCell.belongTo !== 0 && 'is-disabled',\n                          dateCell.isCurrent && 'is-checked',\n                          isNow && 'is-now',\n                        )}\n                        onClick={(event) => clickCell(event, dateCell)}\n                        onDoubleClick={(event) => doubleClickCell(event, dateCell)}\n                        onContextMenu={(event) => rightClickCell(event, dateCell)}\n                      >\n                        {(() => {\n                          if (cell && typeof cell === 'function') return cell(createCalendarCell(dateCell));\n                          if (cell && typeof cell !== 'function') return cell;\n                          return (\n                            <div className={prefixCls([blockName, 'table-body-cell-display'])}>\n                              {fix0(dateCell.date.getDate())}\n                            </div>\n                          );\n                        })()}\n                        {(() => {\n                          let celAppend;\n                          if (cellAppend && typeof cellAppend === 'function')\n                            celAppend = cellAppend(createCalendarCell(dateCell));\n                          if (cellAppend && typeof cellAppend !== 'function') celAppend = cellAppend;\n                          return (\n                            cellAppend && (\n                              <div className={prefixCls([blockName, 'table-body-cell-content'])}>{celAppend}</div>\n                            )\n                          );\n                        })()}\n                      </td>\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          )}\n          {/* year 模式，输出月份 */}\n          {mode === 'year' && (\n            <tbody className={prefixCls([blockName, 'table-body'])}>\n              {monthList.map((monthRow, monthRowIndex) => (\n                <tr key={String(monthRowIndex)} className={prefixCls([blockName, 'table-body-row'])}>\n                  {monthRow.map((monthCell, monthCellIndex) => {\n                    const isNow = new Date().getMonth() === monthCell.date.getMonth();\n                    return (\n                      <td\n                        key={String(monthCellIndex)}\n                        className={prefixCls(\n                          [blockName, 'table-body-cell'],\n                          [monthCell.isCurrent && 'is-checked'],\n                          [isNow && 'calendar__table-body-cell--now'],\n                        )}\n                        onClick={(event) => clickCell(event, monthCell)}\n                        onDoubleClick={(event) => doubleClickCell(event, monthCell)}\n                        onContextMenu={(event) => rightClickCell(event, monthCell)}\n                      >\n                        {(() => {\n                          if (cell && typeof cell === 'function') return cell(monthCell);\n                          if (cell && typeof cell !== 'function') return cell;\n                          const monthCellIndex = monthCell.date.getMonth();\n                          const monthText =\n                            theme === 'full'\n                              ? getMonthCN(monthCellIndex)\n                              : t(local.monthSelection, { month: (monthCellIndex + 1).toString() });\n                          return <div className={prefixCls([blockName, 'table-body-cell-value'])}>{monthText}</div>;\n                        })()}\n                        {(() => {\n                          if (cellAppend && typeof cellAppend === 'function') {\n                            return cellAppend(monthCell);\n                          }\n                          if (cellAppend && typeof cellAppend !== 'function') return cellAppend;\n                          return <div className={prefixCls([blockName, 'table-body-cell-content'])} />;\n                        })()}\n                      </td>\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          )}\n        </table>\n      </div>\n    </div>\n  );\n});\n\nexport default Calendar;\n"],"names":["getDefaultControllerConfigData","visible","disabled","mode","radioGroupProps","year","selectProps","popupProps","overlayStyle","width","month","weekend","showWeekendButtonProps","hideWeekendButtonProps","current","currentDayButtonProps","currentMonthButtonProps","blockName","controlSectionSize","minYear","Calendar","forwardRef","props","ref","className","style","modeFromProps","value","valueFromProps","firstDayOfWeek","format","range","head","cell","cellAppend","week","theme","controllerConfig","isShowWeekendDefault","preventCellContextmenu","onControllerChange","noop","onCellClick","onCellDoubleClick","onCellRightClick","onMonthChange","fillWithZero","controllerConfigData","modeFromConfig","yearFromConfig","monthFromConfig","visibleForMode","radioGroupPropsForMode","visibleForYear","selectPropsForYear","visibleForMonth","selectPropsForMonth","visibleForWeekendToggle","visibleForCurrent","useConfig","classPrefix","useState","setMode","dayjs","setValue","setYearState","parseInt","setMonthState","isShowWeekend","setIsShowWeekend","useLocaleReceiver","local","t","setMonth","useCallback","newMonth","String","setYear","newYear","weekLabelList","split","colHeaderList","useMemo","weekTextArr","Array","isArray","length","list","i","push","day","text","rangeFromTo","v1","v2","isBefore","from","to","controllerOptions","dayJsFilterDate","re","filterDate","toDate","formattedFilterDate","isRangeValid","checkMonthSelectorDisabled","yearIn","monthIn","beginYear","endYear","beginMon","endMon","yearList","monthList2","yearBegin","Math","max","yearEnd","yearSelectList","monthSelectList","dateList","createDateList","monthList","createMonthList","prefixCls","className2","args","forEach","item","index","concat","block","element","modifier","createCalendarCell","cellData","toCurrent","valueIn","now","isValid","React","useImperativeHandle","execCellEvent","event","calendarCell","handleFunc","e","clickCell","formattedDate","doubleClickCell","rightClickCell","preventDefault","useEffect","useLayoutEffect","monthLabelList","cellMonth","getMonthCN","month2","fix0","num","fillZero","createElement","Select","size","options","map","label","yearSelection","onChange","selectYear","monthSelection","selectMonth","height","Radio","Group","variant","value2","Button","monthRadio","yearRadio","CheckTag","onClick","hideWeekend","showWeekend","thisMonth","today","key","dateRow","dateRowIndex","dateCell","dateCellIndex","indexOf","isNow","belongTo","isCurrent","onDoubleClick","onContextMenu","date","getDate","celAppend","monthRow","monthRowIndex","monthCell","monthCellIndex","Date","getMonth","monthCellIndex2","monthText","toString"],"mappings":"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"}