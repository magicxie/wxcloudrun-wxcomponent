{"version":3,"file":"DrawerWrapper.js","sources":["../../src/drawer/DrawerWrapper.tsx"],"sourcesContent":["import React, { useRef, forwardRef, useImperativeHandle, cloneElement } from 'react';\nimport Portal, { PortalProps } from '../common/Portal';\nimport { DrawerProps } from './Drawer';\n\nexport interface DrawerWrapperProps extends PortalProps {\n  attach?: DrawerProps['attach'];\n  children: React.ReactElement;\n}\n\nconst DrawerWrapper = forwardRef((props: DrawerWrapperProps, ref) => {\n  const { children, attach } = props;\n  const portalRef = useRef<HTMLDivElement>(null);\n  let portal = null;\n\n  useImperativeHandle(ref, () => {\n    if (attach === '') {\n      return portalRef.current.parentElement;\n    }\n\n    return portalRef.current;\n  });\n\n  // 如果 attach === '',渲染在当前组件节点中。\n  if (attach === '') {\n    portal = <div ref={portalRef}>{cloneElement(children)}</div>;\n  } else {\n    portal = (\n      <Portal getContainer={attach} ref={portalRef}>\n        {children}\n      </Portal>\n    );\n  }\n\n  return portal;\n});\n\nDrawerWrapper.displayName = 'DrawerWrapper';\n\nexport default DrawerWrapper;\n"],"names":["DrawerWrapper","forwardRef","props","ref","children","attach","portalRef","useRef","portal","useImperativeHandle","current","parentElement","React","createElement","cloneElement","Portal","getContainer","displayName"],"mappings":";;;;;;;;;;;;;IAEMA,aAAa,gBAAGC,UAAU,CAAC,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAC/C,MAAQC,QAAR,GAA6BF,KAA7B,CAAQE,QAAR;AAAA,MAAkBC,MAAlB,GAA6BH,KAA7B,CAAkBG,MAAlB;AACA,MAAMC,SAAS,GAAGC,MAAM,CAAC,IAAD,CAAxB;AACA,MAAIC,MAAM,GAAG,IAAb;AACAC,EAAAA,mBAAmB,CAACN,GAAD,EAAM,YAAM;AAC7B,QAAIE,MAAM,KAAK,EAAf,EAAmB;AACjB,aAAOC,SAAS,CAACI,OAAV,CAAkBC,aAAzB;AACD;;AACD,WAAOL,SAAS,CAACI,OAAjB;AACD,GALkB,CAAnB;;AAMA,MAAIL,MAAM,KAAK,EAAf,EAAmB;AACjBG,IAAAA,MAAM,kBAAmBI,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAClDV,MAAAA,GAAG,EAAEG;AAD6C,KAA3B,eAEtBQ,YAAY,CAACV,QAAD,CAFU,CAAzB;AAGD,GAJD,MAIO;AACLI,IAAAA,MAAM,kBAAmBI,KAAK,CAACC,aAAN,CAAoBE,MAApB,EAA4B;AACnDC,MAAAA,YAAY,EAAEX,MADqC;AAEnDF,MAAAA,GAAG,EAAEG;AAF8C,KAA5B,EAGtBF,QAHsB,CAAzB;AAID;;AACD,SAAOI,MAAP;AACD,CArB+B;AAsBhCR,aAAa,CAACiB,WAAd,GAA4B,eAA5B;;;;"}