{"version":3,"file":"DropdownMenu.js","sources":["../../src/dropdown/DropdownMenu.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { DropdownOption } from './type';\nimport useConfig from '../_util/useConfig';\nimport { DropdownProps } from './Dropdown';\nimport DropdownItem from './DropdownItem';\n\nconst DropdownMenu = (props: DropdownProps) => {\n  const { options = [], maxHeight = 300, maxColumnWidth = 100, minColumnWidth = 10 } = props;\n  const [path, setPath] = useState<string>('');\n  const { classPrefix } = useConfig();\n  const dropdownMenuClass = `${classPrefix}-dropdown__menu`;\n  const isActive = (item: DropdownOption, pathPrefix: string, excludeSelf = true): boolean => {\n    const itemPath = `${pathPrefix}/${item.value}`;\n    if (excludeSelf && path === itemPath) {\n      return false;\n    }\n    return path.indexOf(itemPath) === 0;\n  };\n  const handleHoverItem = (path: string) => {\n    setPath(path);\n  };\n  const handleItemClick = (\n    data: DropdownOption,\n    context: { e: React.MouseEvent<HTMLDivElement, MouseEvent> },\n    idx: number,\n  ) => {\n    options[idx]?.onClick?.(data, context);\n    props.onClick(data, context);\n  };\n  const renderDropdownColumn = (children: Array<DropdownOption>, showSubmenu: boolean, pathPrefix: string) => {\n    // eslint-disable-next-line\n    const menuClass = [`${dropdownMenuClass}-column`, 'narrow-scrollbar', { submenu__visible: showSubmenu }];\n    return (\n      <div\n        key={`/${pathPrefix}`}\n        className={classNames(menuClass)}\n        style={{\n          maxHeight: `${maxHeight}px`,\n        }}\n      >\n        {children.map((item, idx) => (\n          <DropdownItem\n            key={idx}\n            disabled={item.disabled}\n            active={isActive(item, pathPrefix) || item.active}\n            value={item.value}\n            content={item.content}\n            divider={item.divider}\n            hasChildren={item.children && item.children.length > 0}\n            path={`${pathPrefix}/${item.value}`}\n            maxColumnWidth={maxColumnWidth}\n            minColumnWidth={minColumnWidth}\n            onClick={(data: DropdownOption, context: { e: React.MouseEvent<HTMLDivElement, MouseEvent> }) =>\n              handleItemClick(data, context, idx)\n            }\n            onHover={handleHoverItem}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  const dropdownItems = (options: Array<DropdownOption>, pathPrefix = '') => {\n    const columns = [];\n    const activeItem = options.find((item) => isActive(item, pathPrefix, false));\n    columns.push(renderDropdownColumn(options, !!activeItem, pathPrefix));\n    if (activeItem?.children?.length) {\n      columns.push(...dropdownItems(activeItem.children, `${pathPrefix}/${activeItem.value}`));\n    }\n    return columns;\n  };\n  const renderDropdownItems = dropdownItems(options);\n  return <div className={dropdownMenuClass}>{renderDropdownItems}</div>;\n};\n\nexport default DropdownMenu;\n"],"names":["DropdownMenu","props","options","maxHeight","maxColumnWidth","minColumnWidth","useState","path","setPath","useConfig","classPrefix","dropdownMenuClass","isActive","item","pathPrefix","excludeSelf","itemPath","value","indexOf","handleHoverItem","path2","handleItemClick","data","context","idx","onClick","renderDropdownColumn","children","showSubmenu","menuClass","submenu__visible","React","createElement","key","className","classNames","style","map","DropdownItem","disabled","active","content","divider","hasChildren","length","onHover","dropdownItems","options2","columns","activeItem","find","push","renderDropdownItems"],"mappings":"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"}