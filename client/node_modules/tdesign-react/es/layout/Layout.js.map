{"version":3,"file":"Layout.js","sources":["../../src/layout/Layout.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\nimport { StyledProps } from '../common';\nimport { TdLayoutProps, TdHeaderProps, TdFooterProps } from './type';\nimport Aside from './Aside';\n\nexport interface LayoutProps extends TdLayoutProps, StyledProps {\n  children?: React.ReactNode;\n}\nexport interface HeaderProps extends TdHeaderProps, StyledProps {\n  children?: React.ReactNode;\n}\nexport interface ContentProps extends StyledProps {\n  children?: React.ReactNode;\n}\nexport interface FooterProps extends TdFooterProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst Header = (props: HeaderProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const headerClassNames = classNames(`${classPrefix}-layout__header`, className);\n  return (\n    <header className={headerClassNames} style={style} {...others}>\n      {children}\n    </header>\n  );\n};\n\nconst Footer = (props: FooterProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const footerClassNames = classNames(`${classPrefix}-layout__footer`, className);\n  return (\n    <footer className={footerClassNames} style={style} {...others}>\n      {children}\n    </footer>\n  );\n};\n\nconst Content = (props: ContentProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const contentClassNames = classNames(`${classPrefix}-layout__content`, className);\n  return (\n    <main className={contentClassNames} style={style} {...others}>\n      {children}\n    </main>\n  );\n};\n\n/**\n * 布局组件\n */\nconst Layout = (props: LayoutProps) => {\n  const { direction, className, style, children, ...otherLayoutProps } = props;\n  const [asides, setAsides] = useState([]);\n\n  useEffect(() => {\n    React.Children.forEach(children, (child: React.ReactChild) => {\n      if (typeof child !== 'object') return;\n\n      if (child.type === Aside) setAsides([child]);\n    });\n  }, [children]);\n\n  const { classPrefix } = useConfig();\n  const layoutClassNames = classNames(\n    `${classPrefix}-layout`,\n    {\n      [`${classPrefix}-layout--with-sider`]: !!asides.length,\n      [`${classPrefix}-layout__direction-${direction}`]: direction,\n    },\n    className,\n  );\n\n  return (\n    <div className={layoutClassNames} style={style} {...otherLayoutProps}>\n      {children}\n    </div>\n  );\n};\n\nLayout.Header = Header;\nLayout.Content = Content;\nLayout.Footer = Footer;\nLayout.Aside = Aside;\n\nHeader.displayName = 'Header';\nContent.displayName = 'Content';\nFooter.displayName = 'Footer';\nLayout.displayName = 'Layout';\n\nexport default Layout;\n"],"names":["Header","props","useConfig","classPrefix","className","style","children","others","headerClassNames","classNames","React","createElement","Footer","footerClassNames","Content","contentClassNames","Layout","direction","otherLayoutProps","useState","asides","setAsides","useEffect","Children","forEach","child","type","Aside","layoutClassNames","length","displayName"],"mappings":"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"}