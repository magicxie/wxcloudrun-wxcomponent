{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport useConfig from '../_util/useConfig';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size = 'medium',\n      split = true,\n      stripe = false,\n      layout = 'horizontal',\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style = {},\n    } = props;\n\n    const { classPrefix } = useConfig();\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    // prettier-ignore\n    const loadElement = asyncLoading === undefined ? (\n      ''\n    ) : (\n    <div\n      className={classNames(`${classPrefix}-list__load`, {\n        [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n        [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n      })}\n      onClick={handleClickLoad}\n    >\n      {asyncLoading === 'loading' ? (\n        <div>\n          <Loading loading={true} />\n          <span>正在加载中，请稍等</span>\n        </div>\n      ) : (\n        <span>点击加载更多</span>\n      )}\n    </div>\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(className, 't-list', {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {loadElement}\n        {footer}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","header","footer","asyncLoading","size","split","stripe","layout","children","className","onLoadMore","noop","onScroll","style","useConfig","classPrefix","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","React","createElement","classNames","onClick","Loading","loading","ListItem","ListItemMeta","displayName"],"mappings":"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"}