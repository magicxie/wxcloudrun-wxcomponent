{"version":3,"file":"Tabs.js","sources":["../../src/tabs/Tabs.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport { TabValue, TdTabsProps } from './type';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport TabNav from './TabNav';\nimport { useTabClass } from './useTabClass';\nimport TabPanel from './TabPanel';\n\nexport interface TabsProps extends TdTabsProps {\n  children?: React.ReactNode;\n}\n\nconst Tabs = forwardRefWithStatics(\n  (props: TabsProps, ref) => {\n    const { children, placement, onRemove, value: tabValue } = props;\n    let { defaultValue } = props;\n\n    // 样式工具引入\n    const { tdTabsClassPrefix, tdTabsClassGenerator, tdClassGenerator } = useTabClass();\n\n    const itemList = React.Children.map(children, (child: any) => {\n      if (child && child.type === TabPanel) {\n        return child.props;\n      }\n      return null;\n    });\n\n    // 当未设置默认值时，默认选中第一个。\n    if (defaultValue === undefined && Array.isArray(itemList) && itemList.length !== 0) {\n      defaultValue = itemList[0].value;\n    }\n\n    const [value, setValue] = useState<TabValue>(defaultValue);\n\n    useEffect(() => {\n      tabValue !== undefined && setValue(tabValue);\n    }, [tabValue]);\n\n    const renderTabNav = () => (\n      <TabNav {...props} activeValue={value} onRemove={onRemove} itemList={itemList} tabClick={setValue} />\n    );\n\n    return (\n      <div ref={ref} className={classNames(tdTabsClassPrefix)}>\n        {placement !== 'bottom' ? renderTabNav() : null}\n        <div className={classNames(tdTabsClassGenerator('content'), tdClassGenerator(`is-${placement}`))}>\n          {React.Children.map(children, (child: any) => {\n            if (child && child.type === TabPanel) {\n              if (child.props.value === value) {\n                return child;\n              }\n              // 实现 renderOnHide\n              if (child.props.renderOnHide) {\n                return <TabPanel style={{ display: 'none' }}>{child.props.children}</TabPanel>;\n              }\n            }\n            return null;\n          })}\n        </div>\n        {placement === 'bottom' ? renderTabNav() : null}\n      </div>\n    );\n  },\n  { TabPanel },\n);\n\nTabs.displayName = 'Tabs';\n\nexport default Tabs;\n"],"names":["Tabs","forwardRefWithStatics","props","ref","children","placement","onRemove","tabValue","value","defaultValue","useTabClass","tdTabsClassPrefix","tdTabsClassGenerator","tdClassGenerator","itemList","React","Children","map","child","type","TabPanel","Array","isArray","length","useState","setValue","useEffect","renderTabNav","createElement","TabNav","activeValue","tabClick","className","classNames","renderOnHide","style","display","displayName"],"mappings":"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"}