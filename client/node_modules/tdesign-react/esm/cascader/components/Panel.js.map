{"version":3,"file":"Panel.js","sources":["../../../src/cascader/components/Panel.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../_util/useConfig';\n\n// common logic\nimport { getPanels, expendClickEffect, valueChangeEffect } from '../utils/panel';\n\n// components\nimport Item from './Item';\n\n// type\nimport { CascaderPanelProps, TreeNode, ContextType } from '../interface';\n\nconst Panel = (props: CascaderPanelProps) => {\n  const {\n    cascaderContext: { filterActive, treeNodes, inputWidth },\n    cascaderContext,\n    empty,\n  } = props;\n\n  const panels = useMemo(() => getPanels(treeNodes), [treeNodes]);\n\n  const handleExpand = (ctx: ContextType, trigger: 'hover' | 'click') => {\n    const { node } = ctx;\n    const { trigger: propsTrigger, cascaderContext } = props;\n\n    expendClickEffect(propsTrigger, trigger, node, cascaderContext);\n  };\n\n  const handleChange = (ctx: ContextType) => {\n    const { node } = ctx;\n\n    valueChangeEffect(node, cascaderContext);\n  };\n\n  const { classPrefix } = useConfig();\n  const name = `${classPrefix}-cascader`;\n\n  // innerComponents\n  const renderEmpty = <div className={`${name}__panel--empty`}>{empty}</div>;\n\n  const renderItem = (node: TreeNode) => (\n    <Item\n      key={node.value}\n      node={node}\n      cascaderContext={cascaderContext}\n      onClick={(ctx: ContextType) => {\n        handleExpand(ctx, 'click');\n      }}\n      onMouseEnter={(ctx: ContextType) => {\n        handleExpand(ctx, 'hover');\n      }}\n      onChange={handleChange}\n    />\n  );\n\n  const panelsContainer = panels.map((panel, index) => (\n    <ul\n      className={classNames(`${name}__menu`, 'narrow-scrollbar', {\n        [`${name}__menu--segment`]: index !== panels.length - 1,\n      })}\n      key={index}\n    >\n      {panel.map((node: TreeNode) => renderItem(node))}\n    </ul>\n  ));\n\n  const filterPanelsContainer = (\n    <ul className={classNames(`${name}__menu`, 'narrow-scrollbar', `${name}__menu--segment`, `${name}__menu--filter`)}>\n      {treeNodes.map((node: TreeNode) => renderItem(node))}\n    </ul>\n  );\n\n  const renderPanels = filterActive ? filterPanelsContainer : panelsContainer;\n\n  return (\n    <div\n      className={classNames(`${name}__panel`, { [`${name}--normal`]: panels.length })}\n      style={{\n        width: panels.length === 0 ? `${inputWidth}px` : null,\n      }}\n    >\n      {panels && panels.length ? renderPanels : renderEmpty}\n    </div>\n  );\n};\n\nexport default Panel;\n"],"names":["Panel","props","cascaderContext","filterActive","treeNodes","inputWidth","empty","panels","useMemo","getPanels","handleExpand","ctx","trigger","node","propsTrigger","cascaderContext2","expendClickEffect","handleChange","valueChangeEffect","useConfig","classPrefix","name","renderEmpty","React","createElement","className","renderItem","Item","key","value","onClick","onMouseEnter","onChange","panelsContainer","map","panel","index","classNames","length","filterPanelsContainer","renderPanels","style","width"],"mappings":"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"}