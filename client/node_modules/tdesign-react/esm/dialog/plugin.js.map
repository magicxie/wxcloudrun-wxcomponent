{"version":3,"file":"plugin.js","sources":["../../src/dialog/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport DialogComponent, { DialogProps } from './Dialog';\n\nimport { getAttach } from '../_util/dom';\nimport { DialogOptions, DialogMethod, DialogConfirmMethod, DialogAlertMethod, DialogInstance } from './type';\n\nexport interface DialogPlugin extends DialogMethod {\n  alert?: DialogAlertMethod;\n  confirm?: DialogConfirmMethod;\n}\n\nconst createDialog: DialogPlugin = (props: DialogOptions) => {\n  const dialogRef = React.createRef<DialogInstance>();\n  const options = { ...props };\n  const div = document.createElement('div');\n  ReactDOM.render(<DialogComponent {...(options as DialogProps)} visible={true} ref={dialogRef} isPlugin />, div);\n  const container = getAttach(options.attach);\n  if (container) {\n    container.appendChild(div);\n  } else {\n    console.error('attach is not exist');\n  }\n\n  const dialogNode: DialogInstance = {\n    show: () => {\n      dialogRef.current?.show();\n    },\n    hide: () => {\n      dialogRef.current?.hide();\n    },\n    update: (updateOptions: DialogOptions) => {\n      dialogRef.current?.update(updateOptions);\n    },\n    destroy: () => {\n      container.contains(div) && container.removeChild(div);\n    },\n  };\n  return dialogNode;\n};\n\nconst confirm: DialogConfirmMethod = (props: DialogOptions) => createDialog(props);\n\nconst alert: DialogAlertMethod = (props: Omit<DialogOptions, 'confirmBtn'>) => {\n  const options = { ...props };\n  options.cancelBtn = null;\n  return createDialog(options);\n};\n\ncreateDialog.alert = alert;\ncreateDialog.confirm = confirm;\n\nexport const dialog = createDialog;\n\nexport const DialogPlugin = createDialog;\n"],"names":["createDialog","props","dialogRef","React","createRef","options","div","document","createElement","ReactDOM","render","DialogComponent","visible","ref","isPlugin","container","getAttach","attach","appendChild","console","error","dialogNode","show","current","hide","update","updateOptions","destroy","contains","removeChild","confirm","alert","cancelBtn","dialog","DialogPlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC9B,MAAMC,SAAS,gBAAGC,KAAK,CAACC,SAAN,EAAlB;;AACA,MAAMC,OAAO,qBAAQJ,KAAR,CAAb;;AACA,MAAMK,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAC,EAAAA,QAAQ,CAACC,MAAT,iBAAgCP,KAAK,CAACK,aAAN,CAAoBG,OAApB,kCAC3BN,OAD2B;AAE9BO,IAAAA,OAAO,EAAE,IAFqB;AAG9BC,IAAAA,GAAG,EAAEX,SAHyB;AAI9BY,IAAAA,QAAQ,EAAE;AAJoB,KAAhC,EAKIR,GALJ;AAMA,MAAMS,SAAS,GAAGC,SAAS,CAACX,OAAO,CAACY,MAAT,CAA3B;;AACA,MAAIF,SAAJ,EAAe;AACbA,IAAAA,SAAS,CAACG,WAAV,CAAsBZ,GAAtB;AACD,GAFD,MAEO;AACLa,IAAAA,OAAO,CAACC,KAAR,CAAc,qBAAd;AACD;;AACD,MAAMC,UAAU,GAAG;AACjBC,IAAAA,IAAI,EAAE,gBAAM;AAAA;;AACV,4BAAApB,SAAS,CAACqB,OAAV,0EAAmBD,IAAnB;AACD,KAHgB;AAIjBE,IAAAA,IAAI,EAAE,gBAAM;AAAA;;AACV,6BAAAtB,SAAS,CAACqB,OAAV,4EAAmBC,IAAnB;AACD,KANgB;AAOjBC,IAAAA,MAAM,EAAE,gBAACC,aAAD,EAAmB;AAAA;;AACzB,6BAAAxB,SAAS,CAACqB,OAAV,4EAAmBE,MAAnB,CAA0BC,aAA1B;AACD,KATgB;AAUjBC,IAAAA,OAAO,EAAE,mBAAM;AACbZ,MAAAA,SAAS,CAACa,QAAV,CAAmBtB,GAAnB,KAA2BS,SAAS,CAACc,WAAV,CAAsBvB,GAAtB,CAA3B;AACD;AAZgB,GAAnB;AAcA,SAAOe,UAAP;AACD,CA/BD;;AAgCA,IAAMS,OAAO,GAAG,SAAVA,OAAU,CAAC7B,KAAD;AAAA,SAAWD,YAAY,CAACC,KAAD,CAAvB;AAAA,CAAhB;;AACA,IAAM8B,KAAK,GAAG,SAARA,KAAQ,CAAC9B,KAAD,EAAW;AACvB,MAAMI,OAAO,qBAAQJ,KAAR,CAAb;;AACAI,EAAAA,OAAO,CAAC2B,SAAR,GAAoB,IAApB;AACA,SAAOhC,YAAY,CAACK,OAAD,CAAnB;AACD,CAJD;;AAKAL,YAAY,CAAC+B,KAAb,GAAqBA,KAArB;AACA/B,YAAY,CAAC8B,OAAb,GAAuBA,OAAvB;IACaG,MAAM,GAAGjC;IACTkC,YAAY,GAAGlC;;;;"}