{"version":3,"file":"Dropdown.js","sources":["../../node_modules/lodash/last.js","../../node_modules/lodash/_parent.js","../../node_modules/lodash/_baseUnset.js","../../node_modules/lodash/_customOmitClone.js","../../node_modules/lodash/omit.js","../../src/dropdown/Dropdown.tsx"],"sourcesContent":["/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\nimport { DropdownOption, TdDropdownProps } from './type';\nimport { ClassName } from '../common';\nimport useConfig from '../_util/useConfig';\nimport Popup, { PopupVisibleChangeContext } from '../popup';\nimport DropdownMenu from './DropdownMenu';\n\nexport interface DropdownProps extends TdDropdownProps {\n  className?: ClassName;\n  children?: React.ReactNode;\n}\n\nconst Dropdown = (props: DropdownProps) => {\n  const {\n    popupProps = {},\n    disabled,\n    placement = 'bottom-left',\n    trigger = 'hover',\n    className = '',\n    children,\n    hideAfterItemClick = true,\n  } = props;\n  const { classPrefix } = useConfig();\n  const [isPopupVisible, togglePopupVisible] = useState(false);\n  const dropdownClass = `${classPrefix}-dropdown`;\n\n  const handleMenuClick = (data: DropdownOption, context: { e: React.MouseEvent<HTMLDivElement, MouseEvent> }) => {\n    if (hideAfterItemClick) {\n      togglePopupVisible(false);\n    }\n    props.onClick?.(data, context);\n  };\n\n  const DropdownContent = () => <DropdownMenu {...props} onClick={handleMenuClick}></DropdownMenu>;\n\n  const handleVisibleChange = (visible: boolean, context: PopupVisibleChangeContext) => {\n    togglePopupVisible(visible);\n    popupProps?.onVisibleChange?.(visible, context);\n  };\n  const popupParams = {\n    disabled,\n    placement,\n    trigger,\n    showArrow: false,\n    overlayClassName: classNames(dropdownClass, className),\n    content: DropdownContent(),\n    ...omit(popupProps, 'onVisibleChange'),\n  };\n\n  return (\n    <Popup\n      expandAnimation={true}\n      destroyOnClose={true}\n      visible={isPopupVisible}\n      onVisibleChange={handleVisibleChange}\n      {...popupParams}\n    >\n      {children}\n    </Popup>\n  );\n};\n\nDropdown.displayName = 'Dropdown';\n\nexport default Dropdown;\n"],"names":["last","array","length","undefined","last_1","baseGet","require$$0","baseSlice","require$$1","parent","object","path","_parent","castPath","require$$2","toKey","require$$3","baseUnset","_baseUnset","isPlainObject","customOmitClone","value","_customOmitClone","arrayMap","baseClone","copyObject","require$$4","require$$5","flatRest","require$$6","getAllKeysIn","require$$7","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","omit","paths","result","isDeep","omit_1","Dropdown","props","popupProps","disabled","placement","trigger","className","children","hideAfterItemClick","useConfig","classPrefix","useState","isPopupVisible","togglePopupVisible","dropdownClass","handleMenuClick","data","context","onClick","DropdownContent","React","createElement","DropdownMenu","handleVisibleChange","visible","onVisibleChange","popupParams","showArrow","overlayClassName","classNames","content","Popup","expandAnimation","destroyOnClose","displayName"],"mappings":"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"}