{"version":3,"file":"PopContent.js","sources":["../../src/popconfirm/PopContent.tsx"],"sourcesContent":["import React from 'react';\nimport isString from 'lodash/isString';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon } from 'tdesign-icons-react';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport Button from '../button/Button';\nimport noop from '../_util/noop';\nimport useConfig from '../_util/useConfig';\nimport { PopConfirmProps } from './PopConfirm';\nimport { PopconfirmVisibleChangeContext } from './type';\n\nconst PopContent = (props: PopConfirmProps & { onClose?: (context: PopconfirmVisibleChangeContext) => any }) => {\n  const {\n    content,\n    cancelBtn,\n    confirmBtn,\n    icon,\n    theme = 'default',\n    onCancel = noop,\n    onConfirm = noop,\n    onClose = noop,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('popconfirm');\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const { classPrefix } = useConfig();\n\n  const hideCancel = cancelBtn === null || cancelBtn === undefined;\n  const hideConfirm = confirmBtn === null || confirmBtn === undefined;\n\n  function renderIcon() {\n    let color = '#0052D9';\n    // theme 为 default 时不展示图标，否则根据 theme 的值设置图标颜色样式\n    const defaultIcon = <InfoCircleFilledIcon />;\n\n    switch (theme) {\n      case 'warning': // 黄色\n        color = '#FFAA00';\n        break;\n      case 'danger':\n        color = '#FF3E00'; // 红色\n        break;\n    }\n\n    let iconComponent = null;\n\n    // icon 是自定义组件实例，优先级最高\n    if (React.isValidElement(icon)) {\n      iconComponent = React.cloneElement(icon, {\n        style: { color },\n        ...icon.props,\n      });\n      // icon 是自定义组件类型\n    } else if (typeof icon === 'function') {\n      iconComponent = icon();\n    } else if (defaultIcon) {\n      iconComponent = React.cloneElement(defaultIcon, {\n        style: { color },\n      });\n    }\n    return iconComponent;\n  }\n\n  function renderCancel() {\n    if (React.isValidElement(cancelBtn)) {\n      return React.cloneElement(cancelBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'cancel' });\n          cancelBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideCancel) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        variant=\"outline\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'cancel' });\n          onCancel({ e });\n        }}\n      >\n        {isString(cancelBtn) ? cancelBtn : cancelText}\n      </Button>\n    );\n  }\n\n  function renderConfirm() {\n    if (React.isValidElement(confirmBtn)) {\n      return React.cloneElement(confirmBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'confirm' });\n          confirmBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideConfirm) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"primary\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'confirm' });\n          onConfirm({ e });\n        }}\n      >\n        {isString(confirmBtn) ? confirmBtn : confirmText}\n      </Button>\n    );\n  }\n\n  return (\n    <div className={`${classPrefix}-popconfirm__content`}>\n      <div className={`${classPrefix}-popconfirm__body`}>\n        {renderIcon()}\n        <div className={`${classPrefix}-popconfirm__inner`}>{content}</div>\n      </div>\n      <div className={`${classPrefix}-popconfirm__buttons`}>\n        <span className={classNames(`${classPrefix}-popconfirm__cancel`)}>{renderCancel()}</span>\n        <span className={classNames(`${classPrefix}-popconfirm__confirm`)}>{renderConfirm()}</span>\n      </div>\n    </div>\n  );\n};\n\nPopContent.displayName = 'PopContent';\n\nexport default PopContent;\n"],"names":["PopContent","props","content","cancelBtn","confirmBtn","icon","theme","onCancel","noop","onConfirm","onClose","useLocaleReceiver","local","t","confirmText","confirm","cancelText","cancel","useConfig","classPrefix","hideCancel","hideConfirm","renderIcon","color","defaultIcon","React","createElement","InfoCircleFilledIcon","iconComponent","isValidElement","cloneElement","style","renderCancel","onClick","e","trigger","Button","size","variant","isString","renderConfirm","className","classNames","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQMA,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAC5B,MACEC,OADF,GASID,KATJ,CACEC,OADF;AAAA,MAEEC,SAFF,GASIF,KATJ,CAEEE,SAFF;AAAA,MAGEC,UAHF,GASIH,KATJ,CAGEG,UAHF;AAAA,MAIEC,IAJF,GASIJ,KATJ,CAIEI,IAJF;AAAA,qBASIJ,KATJ,CAKEK,KALF;AAAA,MAKEA,KALF,6BAKU,SALV;AAAA,wBASIL,KATJ,CAMEM,QANF;AAAA,MAMEA,QANF,gCAMaC,IANb;AAAA,yBASIP,KATJ,CAOEQ,SAPF;AAAA,MAOEA,SAPF,iCAOcD,IAPd;AAAA,uBASIP,KATJ,CAQES,OARF;AAAA,MAQEA,OARF,+BAQYF,IARZ;;AAUA,2BAAmBG,iBAAiB,CAAC,YAAD,CAApC;AAAA;AAAA,MAAOC,KAAP;AAAA,MAAcC,CAAd;;AACA,MAAMC,WAAW,GAAGD,CAAC,CAACD,KAAK,CAACG,OAAP,CAArB;AACA,MAAMC,UAAU,GAAGH,CAAC,CAACD,KAAK,CAACK,MAAP,CAApB;;AACA,mBAAwBC,SAAS,EAAjC;AAAA,MAAQC,WAAR,cAAQA,WAAR;;AACA,MAAMC,UAAU,GAAGjB,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAA5D;AACA,MAAMkB,WAAW,GAAGjB,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA/D;;AACA,WAASkB,UAAT,GAAsB;AACpB,QAAIC,KAAK,GAAG,SAAZ;AACA,QAAMC,WAAW,kBAAmBC,KAAK,CAACC,aAAN,CAAoBC,oBAApB,EAA0C,IAA1C,CAApC;;AACA,YAAQrB,KAAR;AACE,WAAK,SAAL;AACEiB,QAAAA,KAAK,GAAG,SAAR;AACA;;AACF,WAAK,QAAL;AACEA,QAAAA,KAAK,GAAG,SAAR;AACA;AANJ;;AAQA,QAAIK,aAAa,GAAG,IAApB;;AACA,sBAAIH,KAAK,CAACI,cAAN,CAAqBxB,IAArB,CAAJ,EAAgC;AAC9BuB,MAAAA,aAAa,gBAAGH,KAAK,CAACK,YAAN,CAAmBzB,IAAnB;AACd0B,QAAAA,KAAK,EAAE;AAAER,UAAAA,KAAK,EAALA;AAAF;AADO,SAEXlB,IAAI,CAACJ,KAFM,EAAhB;AAID,KALD,MAKO,IAAI,OAAOI,IAAP,KAAgB,UAApB,EAAgC;AACrCuB,MAAAA,aAAa,GAAGvB,IAAI,EAApB;AACD,KAFM,MAEA,IAAImB,WAAJ,EAAiB;AACtBI,MAAAA,aAAa,gBAAGH,KAAK,CAACK,YAAN,CAAmBN,WAAnB,EAAgC;AAC9CO,QAAAA,KAAK,EAAE;AAAER,UAAAA,KAAK,EAALA;AAAF;AADuC,OAAhC,CAAhB;AAGD;;AACD,WAAOK,aAAP;AACD;;AACD,WAASI,YAAT,GAAwB;AACtB,sBAAIP,KAAK,CAACI,cAAN,CAAqB1B,SAArB,CAAJ,EAAqC;AACnC,0BAAOsB,KAAK,CAACK,YAAN,CAAmB3B,SAAnB,EAA8B;AACnC8B,QAAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AAAA;;AACdxB,UAAAA,OAAO,CAAC;AAAEwB,YAAAA,CAAC,EAADA,CAAF;AAAKC,YAAAA,OAAO,EAAE;AAAd,WAAD,CAAP;AACA,8BAAAhC,SAAS,CAACF,KAAV,+FAAiBgC,OAAjB,uGAA2BC,CAA3B;AACD;AAJkC,OAA9B,CAAP;AAMD;;AACD,QAAId,UAAJ,EAAgB;AACd,aAAO,IAAP;AACD;;AACD,0BAAuBK,KAAK,CAACC,aAAN,CAAoBU,MAApB,EAA4B;AACjDC,MAAAA,IAAI,EAAE,OAD2C;AAEjDC,MAAAA,OAAO,EAAE,SAFwC;AAGjDL,MAAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AACdxB,QAAAA,OAAO,CAAC;AAAEwB,UAAAA,CAAC,EAADA,CAAF;AAAKC,UAAAA,OAAO,EAAE;AAAd,SAAD,CAAP;AACA5B,QAAAA,QAAQ,CAAC;AAAE2B,UAAAA,CAAC,EAADA;AAAF,SAAD,CAAR;AACD;AANgD,KAA5B,EAOpBK,UAAQ,CAACpC,SAAD,CAAR,GAAsBA,SAAtB,GAAkCa,UAPd,CAAvB;AAQD;;AACD,WAASwB,aAAT,GAAyB;AACvB,sBAAIf,KAAK,CAACI,cAAN,CAAqBzB,UAArB,CAAJ,EAAsC;AACpC,0BAAOqB,KAAK,CAACK,YAAN,CAAmB1B,UAAnB,EAA+B;AACpC6B,QAAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AAAA;;AACdxB,UAAAA,OAAO,CAAC;AAAEwB,YAAAA,CAAC,EAADA,CAAF;AAAKC,YAAAA,OAAO,EAAE;AAAd,WAAD,CAAP;AACA,+BAAA/B,UAAU,CAACH,KAAX,iGAAkBgC,OAAlB,wGAA4BC,CAA5B;AACD;AAJmC,OAA/B,CAAP;AAMD;;AACD,QAAIb,WAAJ,EAAiB;AACf,aAAO,IAAP;AACD;;AACD,0BAAuBI,KAAK,CAACC,aAAN,CAAoBU,MAApB,EAA4B;AACjDC,MAAAA,IAAI,EAAE,OAD2C;AAEjD/B,MAAAA,KAAK,EAAE,SAF0C;AAGjD2B,MAAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AACdxB,QAAAA,OAAO,CAAC;AAAEwB,UAAAA,CAAC,EAADA,CAAF;AAAKC,UAAAA,OAAO,EAAE;AAAd,SAAD,CAAP;AACA1B,QAAAA,SAAS,CAAC;AAAEyB,UAAAA,CAAC,EAADA;AAAF,SAAD,CAAT;AACD;AANgD,KAA5B,EAOpBK,UAAQ,CAACnC,UAAD,CAAR,GAAuBA,UAAvB,GAAoCU,WAPhB,CAAvB;AAQD;;AACD,wBAAuBW,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChDe,IAAAA,SAAS,YAAKtB,WAAL;AADuC,GAA3B,iBAEJM,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC5Ce,IAAAA,SAAS,YAAKtB,WAAL;AADmC,GAA3B,EAEhBG,UAAU,EAFM,iBAEcG,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC1De,IAAAA,SAAS,YAAKtB,WAAL;AADiD,GAA3B,EAE9BjB,OAF8B,CAFd,CAFI,iBAMOuB,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AACvDe,IAAAA,SAAS,YAAKtB,WAAL;AAD8C,GAA3B,iBAEXM,KAAK,CAACC,aAAN,CAAoB,MAApB,EAA4B;AAC7Ce,IAAAA,SAAS,EAAEC,UAAU,WAAIvB,WAAJ;AADwB,GAA5B,EAEhBa,YAAY,EAFI,CAFW,iBAIMP,KAAK,CAACC,aAAN,CAAoB,MAApB,EAA4B;AAC9De,IAAAA,SAAS,EAAEC,UAAU,WAAIvB,WAAJ;AADyC,GAA5B,EAEjCqB,aAAa,EAFoB,CAJN,CANP,CAAvB;AAaD;;AACDxC,UAAU,CAAC2C,WAAX,GAAyB,YAAzB;;;;"}