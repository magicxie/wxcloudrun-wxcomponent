{"version":3,"file":"TabBar.js","sources":["../../src/tabs/TabBar.tsx"],"sourcesContent":["import React, { useEffect, useState, CSSProperties } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\n\ninterface TabBarProps {\n  tabPosition: string;\n  activeId: string | number;\n  containerRef: React.MutableRefObject<HTMLDivElement>;\n}\n\nconst TabBar: React.FC<TabBarProps> = (props) => {\n  const { tabPosition, activeId, containerRef } = props;\n  const { classPrefix } = useConfig();\n  const [barStyle, setBarStyle] = useState<CSSProperties>({});\n  const tabsClassPrefix = `${classPrefix}-tabs`;\n\n  const computeStyle = ({ tabPosition, activeId }) => {\n    const isHorizontal = ['bottom', 'top'].includes(tabPosition);\n    const transformPosition = isHorizontal ? 'translateX' : 'translateY';\n    const itemProp = isHorizontal ? 'width' : 'height';\n    const barBorderProp = isHorizontal ? 'width' : 'height';\n\n    let offset = 0;\n    if (containerRef.current) {\n      const itemsRef = containerRef.current.querySelectorAll('.t-tabs__nav-item');\n\n      if (itemsRef.length - 1 >= activeId) {\n        itemsRef.forEach((item, itemIndex) => {\n          if (itemIndex < activeId) {\n            offset += Number(getComputedStyle(item)[itemProp].replace('px', ''));\n          }\n        });\n        const computedItem = itemsRef[activeId];\n        if (!computedItem) {\n          setBarStyle({\n            transform: `${transformPosition}(${0}px)`,\n            [barBorderProp]: 0,\n          });\n          return;\n        }\n        const itemPropValue = getComputedStyle(computedItem)[itemProp];\n        setBarStyle({\n          transform: `${transformPosition}(${offset}px)`,\n          [barBorderProp]: itemPropValue,\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    computeStyle({\n      tabPosition,\n      activeId,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tabPosition, activeId]);\n\n  return (\n    <div\n      className={classNames({\n        [`${tabsClassPrefix}__bar`]: true,\n        [`t-is-${tabPosition}`]: true,\n      })}\n      style={barStyle}\n    ></div>\n  );\n};\n\nTabBar.displayName = 'TabBar';\n\nexport default TabBar;\n"],"names":["TabBar","props","tabPosition","activeId","containerRef","useConfig","classPrefix","useState","barStyle","setBarStyle","tabsClassPrefix","computeStyle","tabPosition2","activeId2","isHorizontal","includes","transformPosition","itemProp","barBorderProp","offset","current","itemsRef","querySelectorAll","length","forEach","item","itemIndex","Number","getComputedStyle","replace","computedItem","transform","itemPropValue","useEffect","React","createElement","className","classNames","style","displayName"],"mappings":";;;;;;;;;;;;;;;IAGMA,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AAAA;;AACxB,MAAQC,WAAR,GAAgDD,KAAhD,CAAQC,WAAR;AAAA,MAAqBC,QAArB,GAAgDF,KAAhD,CAAqBE,QAArB;AAAA,MAA+BC,YAA/B,GAAgDH,KAAhD,CAA+BG,YAA/B;;AACA,mBAAwBC,SAAS,EAAjC;AAAA,MAAQC,WAAR,cAAQA,WAAR;;AACA,kBAAgCC,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOC,QAAP;AAAA,MAAiBC,WAAjB;;AACA,MAAMC,eAAe,aAAMJ,WAAN,UAArB;;AACA,MAAMK,YAAY,GAAG,SAAfA,YAAe,OAAwD;AAAA,QAAxCC,YAAwC,QAArDV,WAAqD;AAAA,QAAhBW,SAAgB,QAA1BV,QAA0B;AAC3E,QAAMW,YAAY,GAAG,CAAC,QAAD,EAAW,KAAX,EAAkBC,QAAlB,CAA2BH,YAA3B,CAArB;AACA,QAAMI,iBAAiB,GAAGF,YAAY,GAAG,YAAH,GAAkB,YAAxD;AACA,QAAMG,QAAQ,GAAGH,YAAY,GAAG,OAAH,GAAa,QAA1C;AACA,QAAMI,aAAa,GAAGJ,YAAY,GAAG,OAAH,GAAa,QAA/C;AACA,QAAIK,MAAM,GAAG,CAAb;;AACA,QAAIf,YAAY,CAACgB,OAAjB,EAA0B;AACxB,UAAMC,QAAQ,GAAGjB,YAAY,CAACgB,OAAb,CAAqBE,gBAArB,CAAsC,mBAAtC,CAAjB;;AACA,UAAID,QAAQ,CAACE,MAAT,GAAkB,CAAlB,IAAuBV,SAA3B,EAAsC;AACpCQ,QAAAA,QAAQ,CAACG,OAAT,CAAiB,UAACC,IAAD,EAAOC,SAAP,EAAqB;AACpC,cAAIA,SAAS,GAAGb,SAAhB,EAA2B;AACzBM,YAAAA,MAAM,IAAIQ,MAAM,CAACC,gBAAgB,CAACH,IAAD,CAAhB,CAAuBR,QAAvB,EAAiCY,OAAjC,CAAyC,IAAzC,EAA+C,EAA/C,CAAD,CAAhB;AACD;AACF,SAJD;AAKA,YAAMC,YAAY,GAAGT,QAAQ,CAACR,SAAD,CAA7B;;AACA,YAAI,CAACiB,YAAL,EAAmB;AACjBrB,UAAAA,WAAW;AACTsB,YAAAA,SAAS,YAAKf,iBAAL,OAA0B,CAA1B;AADA,aAERE,aAFQ,EAEQ,CAFR,EAAX;AAIA;AACD;;AACD,YAAMc,aAAa,GAAGJ,gBAAgB,CAACE,YAAD,CAAhB,CAA+Bb,QAA/B,CAAtB;AACAR,QAAAA,WAAW;AACTsB,UAAAA,SAAS,YAAKf,iBAAL,cAA0BG,MAA1B;AADA,WAERD,aAFQ,EAEQc,aAFR,EAAX;AAID;AACF;AACF,GA7BD;;AA8BAC,EAAAA,SAAS,CAAC,YAAM;AACdtB,IAAAA,YAAY,CAAC;AACXT,MAAAA,WAAW,EAAXA,WADW;AAEXC,MAAAA,QAAQ,EAARA;AAFW,KAAD,CAAZ;AAID,GALQ,EAKN,CAACD,WAAD,EAAcC,QAAd,CALM,CAAT;AAMA,wBAAuB+B,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChDC,IAAAA,SAAS,EAAEC,UAAU,2DACf3B,eADe,YACU,IADV,+CAEVR,WAFU,GAEM,IAFN,gBAD2B;AAKhDoC,IAAAA,KAAK,EAAE9B;AALyC,GAA3B,CAAvB;AAOD;;AACDR,MAAM,CAACuC,WAAP,GAAqB,QAArB;;;;"}