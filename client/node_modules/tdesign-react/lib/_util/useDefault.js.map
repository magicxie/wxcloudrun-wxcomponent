{"version":3,"file":"useDefault.js","sources":["../../src/_util/useDefault.ts"],"sourcesContent":["import { useState } from 'react';\nimport noop from './noop';\n\nexport interface ChangeHandler<T, P extends any[]> {\n  (value: T, ...args: P);\n}\n\nexport default function useDefault<T, P extends any[]>(\n  value: T,\n  defaultValue: T,\n  onChange: ChangeHandler<T, P>,\n): [T, ChangeHandler<T, P>] {\n  // 无论是否受控，都要 useState，因为 Hooks 是无条件的\n  const [internalValue, setInternalValue] = useState(defaultValue);\n\n  // 受控模式\n  if (typeof value !== 'undefined') {\n    return [value, onChange || noop];\n  }\n\n  // 非受控模式\n  return [\n    internalValue,\n    (newValue, ...args) => {\n      setInternalValue(newValue);\n      if (typeof onChange === 'function') {\n        onChange(newValue, ...args);\n      }\n    },\n  ];\n}\n"],"names":["useDefault","value","defaultValue","onChange","useState","internalValue","setInternalValue","noop","newValue","args"],"mappings":";;;;;;;;;;;AAEe,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,YAA3B,EAAyCC,QAAzC,EAAmD;AAChE,kBAA0CC,QAAQ,CAACF,YAAD,CAAlD;AAAA;AAAA,MAAOG,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,MAAI,OAAOL,KAAP,KAAiB,WAArB,EAAkC;AAChC,WAAO,CAACA,KAAD,EAAQE,QAAQ,IAAII,IAApB,CAAP;AACD;;AACD,SAAO,CACLF,aADK,EAEL,UAACG,QAAD,EAAuB;AACrBF,IAAAA,gBAAgB,CAACE,QAAD,CAAhB;;AACA,QAAI,OAAOL,QAAP,KAAoB,UAAxB,EAAoC;AAAA,wCAFxBM,IAEwB;AAFxBA,QAAAA,IAEwB;AAAA;;AAClCN,MAAAA,QAAQ,MAAR,UAASK,QAAT,SAAsBC,IAAtB;AACD;AACF,GAPI,CAAP;AASD;;;;"}