{"version":3,"file":"useDefaultValue.js","sources":["../../src/_util/useDefaultValue.ts"],"sourcesContent":["import { SyntheticEvent, FormEvent, MouseEvent } from 'react';\nimport useDefault from './useDefault';\nimport noop from './noop';\n\nexport interface ControlledProps<\n  V,\n  E extends SyntheticEvent = SyntheticEvent | FormEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>,\n  C extends ChangeContext<E> = ChangeContext<E>,\n> {\n  /**\n   * 未提供 `value` 的情况下，提供了 `defaultValue`，则可以当做是非受控组件使用\n   */\n  defaultValue?: V;\n\n  /**\n   * 当前值\n   */\n  value?: V;\n\n  /**\n   * 值发生变更时进行回调\n   * - `value` 变更的目标值\n   * - `context` 此次变更的更多上下文信息，其中 `context.event` 可以获得导致变更的 React 事件\n   */\n  onChange?(value: V, context: C): void;\n}\n\n/**\n * 表单 `onChange` 事件中，提供的上下文信息\n */\nexport interface ChangeContext<E extends SyntheticEvent = SyntheticEvent> {\n  /**\n   * 触发 `onChange` 事件的事件对象\n   */\n  event?: E;\n  e?: E;\n}\n\nexport default function useDefaultValue<T, P extends ControlledProps<T>>(props: P, defaultDefaultValue?: T) {\n  type ReturnType = Omit<P, 'defaultValue'>;\n\n  const { defaultValue, value, onChange = noop, ...restProps } = props;\n\n  const [finalValue, finalOnChange] = useDefault(\n    value,\n    typeof defaultValue === 'undefined' ? defaultDefaultValue : defaultValue,\n    onChange,\n  );\n\n  return {\n    value: finalValue,\n    onChange: finalOnChange,\n    ...restProps,\n  } as ReturnType;\n}\n"],"names":["useDefaultValue","props","defaultDefaultValue","defaultValue","value","onChange","noop","restProps","useDefault","finalValue","finalOnChange"],"mappings":";;;;;;;;;;;;;;;;;;;AAEe,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,mBAAhC,EAAqD;AAClE,MAAQC,YAAR,GAA+DF,KAA/D,CAAQE,YAAR;AAAA,MAAsBC,KAAtB,GAA+DH,KAA/D,CAAsBG,KAAtB;AAAA,wBAA+DH,KAA/D,CAA6BI,QAA7B;AAAA,MAA6BA,QAA7B,gCAAwCC,IAAxC;AAAA,MAAiDC,SAAjD,4BAA+DN,KAA/D;;AACA,oBAAoCO,UAAU,CAACJ,KAAD,EAAQ,OAAOD,YAAP,KAAwB,WAAxB,GAAsCD,mBAAtC,GAA4DC,YAApE,EAAkFE,QAAlF,CAA9C;AAAA;AAAA,MAAOI,UAAP;AAAA,MAAmBC,aAAnB;;AACA;AACEN,IAAAA,KAAK,EAAEK,UADT;AAEEJ,IAAAA,QAAQ,EAAEK;AAFZ,KAGKH,SAHL;AAKD;;;;"}