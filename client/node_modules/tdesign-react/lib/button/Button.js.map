{"version":3,"file":"Button.js","sources":["../../src/button/Button.tsx"],"sourcesContent":["import React, { forwardRef, useRef } from 'react';\nimport classNames from 'classnames';\nimport noop from '../_util/noop';\nimport useConfig from '../_util/useConfig';\nimport useRipple from '../_util/useRipple';\nimport Loading from '../loading';\nimport { TdButtonProps } from './type';\n\n/**\n * 除表格中列出的属性外，支持透传原生 `<button>` 标签支持的属性。\n */\nexport interface ButtonProps extends TdButtonProps, React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * 按钮组件\n */\nconst Button = forwardRef(\n  (\n    {\n      type = 'button',\n      theme,\n      variant = 'base',\n      icon,\n      disabled,\n      loading,\n      size,\n      block,\n      ghost,\n      shape = 'rectangle',\n      children,\n      content,\n      className,\n      onClick = noop,\n      ...buttonProps\n    }: ButtonProps,\n    ref: React.RefObject<HTMLButtonElement>,\n  ) => {\n    const { classPrefix } = useConfig();\n\n    const btnRef = useRef();\n    useRipple(ref || btnRef);\n\n    const hasChildren = typeof children !== 'undefined';\n    const hasContent = typeof content !== 'undefined';\n    let childrenNode = children;\n\n    if (!hasChildren && hasContent) {\n      childrenNode = content;\n    }\n\n    let iconNode = icon;\n    if (loading) iconNode = <Loading loading={loading} inheritColor={true} />;\n\n    let renderTheme = theme;\n\n    if (!theme) {\n      if (variant === 'base') {\n        renderTheme = 'primary';\n      } else {\n        renderTheme = 'default';\n      }\n    }\n\n    return (\n      <button\n        ref={ref || btnRef}\n        type={type}\n        className={classNames(\n          className,\n          [\n            `${classPrefix}-button`,\n            `${classPrefix}-button--theme-${renderTheme}`,\n            `${classPrefix}-button--variant-${variant}`,\n          ],\n          {\n            [`${classPrefix}-button--shape-${shape}`]: shape !== 'rectangle',\n            [`${classPrefix}-button--ghost`]: ghost,\n            [`${classPrefix}-is-loading`]: loading,\n            [`${classPrefix}-is-disabled`]: disabled || loading,\n            [`${classPrefix}-size-s`]: size === 'small',\n            [`${classPrefix}-size-l`]: size === 'large',\n            [`${classPrefix}-size-full-width`]: block,\n          },\n        )}\n        onClick={!disabled && !loading ? onClick : undefined}\n        disabled={disabled || loading}\n        {...buttonProps}\n      >\n        {iconNode ? (\n          <>\n            {iconNode}\n            {(hasChildren || hasContent) && <span className={`${classPrefix}-button__text`}>{childrenNode}</span>}\n          </>\n        ) : (\n          <span className={`${classPrefix}-button__text`}>{childrenNode}</span>\n        )}\n      </button>\n    );\n  },\n);\n\nButton.displayName = 'Button';\n\nexport default Button;\n"],"names":["Button","forwardRef","ref","type","theme","variant","icon","disabled","loading","size","block","ghost","shape","children","content","className","onClick","noop","buttonProps","useConfig","classPrefix","btnRef","useRef","useRipple","hasChildren","hasContent","childrenNode","iconNode","React","createElement","Loading","inheritColor","renderTheme","classNames","Fragment","displayName"],"mappings":"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"}