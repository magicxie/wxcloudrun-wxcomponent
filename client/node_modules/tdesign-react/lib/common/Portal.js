/**
 * tdesign v0.22.1
 * (c) 2022 tdesign
 * @license MIT
 */

import { _ as _slicedToArray } from '../_chunks/dep-93971e86.js';
import { _ as _typeof } from '../_chunks/dep-156c830d.js';
import { forwardRef, useMemo, useEffect, useImperativeHandle } from 'react';
import { createPortal } from 'react-dom';
import '../_chunks/dep-beac373a.js';

function getAttach(attach) {
  var parent;

  if (typeof attach === "string") {
    parent = document.querySelector(attach);
  }

  if (typeof attach === "function") {
    parent = attach();
  }

  if (_typeof(attach) === "object" && attach instanceof window.HTMLElement) {
    parent = attach;
  }

  return parent || document.body;
}
var Portal = /*#__PURE__*/forwardRef(function (props, ref) {
  var getContainer = props.getContainer,
      children = props.children;

  var _useMemo = useMemo(function () {
    var parent = getAttach(getContainer);

    if (parent) {
      var div = document.createElement("div");
      parent.appendChild(div);
      return [parent, div];
    }
  }, [getContainer]),
      _useMemo2 = _slicedToArray(_useMemo, 2),
      parentContainer = _useMemo2[0],
      container = _useMemo2[1];

  useEffect(function () {
    return function () {
      container.remove();
    };
  }, []);
  useImperativeHandle(ref, function () {
    return parentContainer;
  });
  return /*#__PURE__*/createPortal(children, container);
});
Portal.displayName = "Portal";

export { Portal as default, getAttach };
//# sourceMappingURL=Portal.js.map
