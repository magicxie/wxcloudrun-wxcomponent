{"version":3,"file":"DatePicker.js","sources":["../../node_modules/lodash/_baseIsDate.js","../../node_modules/lodash/isDate.js","../../node_modules/dayjs/plugin/isBetween.js","../../src/date-picker/DatePicker.tsx"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar dateTag = '[object Date]';\n\n/**\n * The base implementation of `_.isDate` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n */\nfunction baseIsDate(value) {\n  return isObjectLike(value) && baseGetTag(value) == dateTag;\n}\n\nmodule.exports = baseIsDate;\n","var baseIsDate = require('./_baseIsDate'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsDate = nodeUtil && nodeUtil.isDate;\n\n/**\n * Checks if `value` is classified as a `Date` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n * @example\n *\n * _.isDate(new Date);\n * // => true\n *\n * _.isDate('Mon April 23 2012');\n * // => false\n */\nvar isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\nmodule.exports = isDate;\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_isBetween=t()}(this,function(){\"use strict\";return function(e,t,i){t.prototype.isBetween=function(e,t,s,f){var n=i(e),o=i(t),r=\"(\"===(f=f||\"()\")[0],u=\")\"===f[1];return(r?this.isAfter(n,s):!this.isBefore(n,s))&&(u?this.isBefore(o,s):!this.isAfter(o,s))||(r?this.isBefore(n,s):!this.isAfter(n,s))&&(u?this.isAfter(o,s):!this.isBefore(o,s))}}});\n","import React, { useState, useRef, useEffect } from 'react';\nimport isObject from 'lodash/isObject';\nimport isDate from 'lodash/isDate';\nimport isArray from 'lodash/isArray';\nimport isString from 'lodash/isString';\nimport dayjs from 'dayjs';\nimport isBetween from 'dayjs/plugin/isBetween';\nimport classNames from 'classnames';\nimport { TimeIcon as IconTime, CalendarIcon as IconCalendar } from 'tdesign-icons-react';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport useConfig from '../_util/useConfig';\nimport { StyledProps } from '../common';\nimport { TdDatePickerProps } from './type';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport useClickOutside from '../_util/useClickOutside';\n\nimport Popup from '../popup';\nimport Input from '../input';\nimport Button from '../button';\nimport CalendarPresets from './base/CalendarPresets';\nimport DatePanel from './panel/Date';\nimport DateRangePanel from './panel/DateRange';\nimport TimePickerPanel from '../time-picker/panel/TimePickerPanel';\nimport TimePickerRangePanel from '../time-picker/panel/TimePickerRangePanel';\n\ndayjs.extend(isBetween);\n\nexport interface DatePickerProps extends TdDatePickerProps, StyledProps {}\n\nconst TIME_FORMAT = 'HH:mm:ss';\n\n// TODO 下版本重构下 datepicker 逻辑，与 RangePicker 一起实现\nconst DatePicker = (props: DatePickerProps) => {\n  const {\n    className,\n    style,\n    allowInput,\n    clearable,\n    disabled,\n    disableDate,\n    enableTimePicker,\n    format,\n    inputProps,\n    mode,\n    popupProps,\n    prefixIcon,\n    presets,\n    range,\n    size,\n    suffixIcon,\n    value,\n    defaultValue,\n    firstDayOfWeek,\n    onChange,\n    // onBlur,\n    // onFocus,\n    // onInput,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('datePicker');\n  const selectTimeText = t(local.selectTime);\n  const selectDateText = t(local.selectDate);\n  const confirmText = t(local.confirm);\n  const rangeSeparatorText = t(local.rangeSeparator);\n  const placeholder = t(local.placeholder[mode]);\n\n  const { classPrefix } = useConfig();\n  const CLASSNAMES = useCommonClassName();\n\n  const datePickerRef = useRef(null);\n  const dropdownPopupRef = useRef(null);\n  const inputRef = useRef(null);\n\n  const [popupShow, setPopupShow] = useState(false);\n  const [timePanelShow, setTimePanelShow] = useState(false);\n  const [timeValue, setTimeValue] = useState('');\n  const [timeRangeValue, setTimeRangeValue] = useState([]);\n  const [start, setStart] = useState(new Date());\n  const [end, setEnd] = useState(new Date());\n  const [formattedValue, setFormattedValue] = useState('');\n  const [selectedDates, setSelectedDates] = useState([]);\n\n  const isControlled = typeof value !== 'undefined';\n\n  function isValidDate(date: string | number | Date | (string | number | Date)[]) {\n    if (isArray(date) && isDate(new Date(date[0])) && isDate(new Date(date[1]))) return true;\n    if (isString(date) && isDate(new Date(date))) return true;\n    return false;\n  }\n\n  function initDatePicker() {\n    const val: any = value || defaultValue;\n    if (val && isValidDate(val)) {\n      const startVal = range ? new Date(val[0]) : new Date(val);\n      const endVal = range ? new Date(val[1]) : new Date(val);\n\n      setStart(startVal);\n      setEnd(endVal);\n      setTimeValue(dayjs(startVal).format(TIME_FORMAT));\n      setTimeRangeValue([dayjs(startVal).format(TIME_FORMAT), dayjs(endVal).format(TIME_FORMAT)]);\n      setSelectedDates(range ? [val[0], val[1]] : [val]);\n    }\n  }\n\n  useClickOutside([datePickerRef, dropdownPopupRef], () => {\n    close();\n  });\n\n  useEffect(() => {\n    initDatePicker();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    updateFormatValue();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedDates, value]);\n\n  function updateFormatValue() {\n    let dates = selectedDates;\n\n    // 受控模式\n    if (isControlled) {\n      if (Array.isArray(value)) {\n        dates = value.map((d: string) => (d ? new Date(d) : new Date()));\n      } else {\n        dates = value ? [new Date(value)] : [];\n      }\n    }\n\n    const selectedFmtDates: string[] = dates.map((d: Date) => formatDate(d));\n\n    let pickerMode: string = mode;\n    if (range) pickerMode = 'range';\n    let nextValue = '';\n\n    switch (pickerMode) {\n      case 'date':\n      case 'month':\n      case 'year':\n        dates[0] && setStart(new Date(dates[0]));\n        nextValue = selectedFmtDates.join('');\n        break;\n      case 'range':\n        if (selectedFmtDates.length > 1) {\n          setStart(new Date(dates[0]));\n          setEnd(new Date(dates[1]));\n          nextValue = [selectedFmtDates[0], selectedFmtDates[1]].join(rangeSeparatorText);\n        }\n        break;\n    }\n\n    setFormattedValue(nextValue);\n  }\n\n  function showPopup() {\n    if (disabled) return;\n    setPopupShow(true);\n  }\n\n  function formatDate(date: Date): string {\n    let dateFormat = format || '';\n    const arrTime = ['H', 'h', 'm', 's'];\n    const hasTime = arrTime.some((f) => String(dateFormat).includes(f));\n    if (enableTimePicker && !hasTime) {\n      dateFormat = [dateFormat, TIME_FORMAT].join(' ');\n    }\n    const d1 = new Date(date);\n    return dayjs(d1).format(dateFormat);\n  }\n\n  function close() {\n    if (disabled) return;\n\n    setPopupShow(false);\n    setTimePanelShow(false);\n  }\n\n  function handleClear({ e }): void {\n    e.stopPropagation();\n    close();\n\n    if (!disabled) {\n      setStart(new Date());\n      setEnd(new Date());\n      setSelectedDates([]);\n      setFormattedValue('');\n      setTimeValue('00:00:00');\n      setTimeRangeValue(['00:00:00', '00:00:00']);\n      submitInput([], true);\n    }\n  }\n\n  function submitInput(selectedDates: any[], triggerChange = true) {\n    const pickerMode = range ? 'range' : mode;\n\n    switch (pickerMode) {\n      case 'date':\n      case 'month':\n      case 'year':\n        triggerChange && onChange?.(selectedDates[0]);\n        break;\n      case 'range':\n        triggerChange && onChange?.(selectedDates);\n        break;\n    }\n  }\n\n  function clickRange(value) {\n    const nextDates = [];\n    if (Array.isArray(value)) {\n      nextDates.push(...[dayjs(value[0]).toDate(), dayjs(value[1]).toDate()]);\n\n      setStart(nextDates[0]);\n      setEnd(nextDates[1]);\n    } else {\n      nextDates.push(dayjs(value).toDate());\n\n      setStart(nextDates[0]);\n      setEnd(nextDates[0]);\n    }\n    setSelectedDates(nextDates);\n    clickedApply(!enableTimePicker, nextDates);\n  }\n\n  function clickedApply(closePicker = true, nextDates?: Date[]): void {\n    const dates = nextDates || selectedDates;\n    submitInput(\n      dates.map((d: Date) => formatDate(d)),\n      true,\n    );\n\n    closePicker && close();\n  }\n\n  function toggleTime() {\n    setTimeValue(dayjs(start).format(TIME_FORMAT));\n    setTimeRangeValue([dayjs(start).format(TIME_FORMAT), dayjs(end).format(TIME_FORMAT)]);\n    setTimePanelShow(!timePanelShow);\n  }\n\n  function handleTimePick(value: any) {\n    if (Array.isArray(value)) {\n      const [startTime, endTime] = value;\n      const [startHour, startMinute, startSecond] = startTime.split(':');\n      const startDate = new Date(start);\n      startDate.setHours(startHour);\n      startDate.setMinutes(startMinute);\n      startDate.setSeconds(startSecond);\n\n      const [endHour, endMinute, endSecond] = endTime.split(':');\n      const endDate = new Date(end);\n      endDate.setHours(endHour);\n      endDate.setMinutes(endMinute);\n      endDate.setSeconds(endSecond);\n      setTimeRangeValue(value);\n      clickRange([startDate, endDate]);\n    } else {\n      const [hour, minute, second] = value.split(':');\n      const startDate = new Date(start);\n      startDate.setHours(hour);\n      startDate.setMinutes(minute);\n      startDate.setSeconds(second);\n      setTimeValue(value);\n      dateClick(startDate);\n    }\n  }\n\n  function dateClick(value: Date | Date[]) {\n    // @todo add year range and month range\n    let pickerMode: string = mode;\n    if (range) pickerMode = 'range';\n\n    switch (pickerMode) {\n      case 'year':\n      case 'month':\n      case 'date': {\n        if (value instanceof Date) {\n          if (!isControlled) {\n            setStart(value);\n            setEnd(value);\n          }\n          setSelectedDates([value]);\n          // 有时间选择时，点击日期不关闭弹窗\n          clickedApply(!enableTimePicker, [value]);\n        }\n        break;\n      }\n      case 'range': {\n        if (Array.isArray(value)) {\n          if (!isControlled) {\n            setStart(value[0]);\n            setEnd(value[1]);\n          }\n          setSelectedDates(value);\n          // 有时间选择时，点击日期不关闭弹窗\n          clickedApply(!enableTimePicker, value);\n        }\n        break;\n      }\n    }\n  }\n\n  function isEnabled(value: Date): boolean {\n    if (!disableDate) return true;\n\n    let isEnabled = true;\n    // 值类型为 Function 则表示返回值为 true 的日期会被禁用\n    if (typeof disableDate === 'function') {\n      return !disableDate(value);\n    }\n\n    // 禁用日期，示例：['A', 'B'] 表示日期 A 和日期 B 会被禁用。\n    if (Array.isArray(disableDate)) {\n      let isIncludes = false;\n      const formatedDisabledDate = disableDate.map((item: string) => dayjs(item, format));\n      formatedDisabledDate.forEach((item) => {\n        if (item.isSame(dayjs(value))) {\n          isIncludes = true;\n        }\n      });\n      return !isIncludes;\n    }\n\n    // { from: 'A', to: 'B' } 表示在 A 到 B 之间的日期会被禁用。\n    const { from, to, before, after } = disableDate;\n    if (from && to) {\n      const compareMin = dayjs(new Date(from));\n      const compareMax = dayjs(new Date(to));\n\n      return !dayjs(value).isBetween(compareMin, compareMax, mode, '[]');\n    }\n\n    const min = before ? new Date(before) : null;\n    const max = after ? new Date(after) : null;\n\n    // { before: 'A', after: 'B' } 表示在 A 之前和在 B 之后的日期都会被禁用。\n    if (max && min) {\n      const compareMin = dayjs(new Date(min));\n      const compareMax = dayjs(new Date(max));\n\n      isEnabled = dayjs(value).isBetween(compareMin, compareMax, mode, '[]');\n    } else if (min) {\n      const compareMin = dayjs(new Date(min));\n      isEnabled = !dayjs(value).isBefore(compareMin, mode);\n    } else if (max) {\n      const compareMax = dayjs(new Date(max));\n      isEnabled = !dayjs(value).isAfter(compareMax, mode);\n    }\n    return isEnabled;\n  }\n\n  function renderContent() {\n    const pickerStyles = classNames(`${classPrefix}-date-picker__container`, {\n      [`${classPrefix}-date-picker--open`]: popupShow,\n      [`${classPrefix}-date-picker--range`]: range,\n    });\n\n    const panelProps = {\n      mode,\n      firstDayOfWeek: firstDayOfWeek === undefined ? 1 : firstDayOfWeek,\n      onChange: dateClick,\n      disableDate: (d: Date) => !isEnabled(d),\n      minDate: isObject(disableDate) && 'before' in disableDate ? new Date(disableDate.before) : null,\n      maxDate: isObject(disableDate) && 'after' in disableDate ? new Date(disableDate.after) : null,\n    };\n\n    const panelComponent = range ? (\n      <DateRangePanel {...panelProps} value={[start, end]} />\n    ) : (\n      <DatePanel {...panelProps} value={start} />\n    );\n\n    const timepickerComponent = range ? (\n      <TimePickerRangePanel value={timeRangeValue} onChange={handleTimePick} />\n    ) : (\n      <TimePickerPanel value={timeValue} onChange={handleTimePick} />\n    );\n\n    return (\n      <div ref={dropdownPopupRef} className={pickerStyles}>\n        {enableTimePicker && timePanelShow && <div>{timepickerComponent}</div>}\n        {!timePanelShow && panelComponent}\n        {(!!presets || enableTimePicker) && (\n          <div className={`${classPrefix}-date-picker__footer`}>\n            <CalendarPresets presets={presets} onClickRange={clickRange} />\n            {enableTimePicker && (\n              <div className={`${classPrefix}-date-picker--apply`}>\n                {enableTimePicker && (\n                  <Button theme=\"primary\" variant=\"text\" onClick={toggleTime}>\n                    {timePanelShow ? selectDateText : selectTimeText}\n                  </Button>\n                )}\n                {\n                  <Button theme=\"primary\" onClick={() => clickedApply(true)}>\n                    {confirmText}\n                  </Button>\n                }\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  const triggerClassName = classNames(`${classPrefix}-form-controls`, { [CLASSNAMES.STATUS.active]: popupShow });\n  const defaultSuffixIcon = enableTimePicker ? <IconTime /> : <IconCalendar />;\n  const datePickerClassName = classNames(`${classPrefix}-date-picker`, className, CLASSNAMES.SIZE[size], {\n    [`${classPrefix}-date-picker--month-picker`]: mode === 'year' || mode === 'month',\n  });\n\n  return (\n    <div className={datePickerClassName} ref={datePickerRef} style={style}>\n      <Popup\n        trigger=\"context-menu\"\n        placement=\"bottom-left\"\n        visible={popupShow}\n        content={renderContent()}\n        overlayClassName={`${classPrefix}-date-picker`}\n        className={`${classPrefix}-date-picker__popup-reference`}\n        expandAnimation={true}\n        destroyOnClose={true}\n        {...popupProps}\n      >\n        <div className={triggerClassName} onClick={showPopup}>\n          <Input\n            ref={inputRef}\n            size={size}\n            value={formattedValue}\n            disabled={disabled}\n            clearable={clearable}\n            placeholder={placeholder}\n            readonly={!allowInput}\n            onClear={handleClear}\n            prefixIcon={prefixIcon}\n            suffixIcon={suffixIcon || defaultSuffixIcon}\n            {...inputProps}\n          />\n        </div>\n      </Popup>\n    </div>\n  );\n};\n\nDatePicker.displayName = 'DatePicker';\n\nDatePicker.defaultProps = {\n  format: 'YYYY-MM-DD',\n  mode: 'month',\n  placeholder: '请选择',\n  size: 'medium',\n};\n\nexport default DatePicker;\n"],"names":["baseGetTag","require$$0","isObjectLike","require$$1","dateTag","baseIsDate","value","_baseIsDate","baseUnary","nodeUtil","require$$2","nodeIsDate","isDate","isDate_1","e","t","module","this","i","prototype","isBetween","s","f","n","o","r","u","isAfter","isBefore","dayjs","extend","TIME_FORMAT","DatePicker","props","className","style","allowInput","clearable","disabled","disableDate","enableTimePicker","format","inputProps","mode","popupProps","prefixIcon","presets","range","size","suffixIcon","defaultValue","firstDayOfWeek","onChange","useLocaleReceiver","local","selectTimeText","selectTime","selectDateText","selectDate","confirmText","confirm","rangeSeparatorText","rangeSeparator","placeholder","useConfig","classPrefix","CLASSNAMES","useCommonClassName","datePickerRef","useRef","dropdownPopupRef","inputRef","useState","popupShow","setPopupShow","timePanelShow","setTimePanelShow","timeValue","setTimeValue","timeRangeValue","setTimeRangeValue","Date","start","setStart","end","setEnd","formattedValue","setFormattedValue","selectedDates","setSelectedDates","isControlled","isValidDate","date","isArray","isString","initDatePicker","val","startVal","endVal","useClickOutside","close","useEffect","updateFormatValue","dates","Array","map","d","selectedFmtDates","formatDate","pickerMode","nextValue","join","length","showPopup","dateFormat","arrTime","hasTime","some","String","includes","d1","handleClear","stopPropagation","submitInput","selectedDates2","triggerChange","clickRange","value2","nextDates","push","toDate","clickedApply","closePicker","toggleTime","handleTimePick","startTime","endTime","split","startHour","startMinute","startSecond","startDate","setHours","setMinutes","setSeconds","endHour","endMinute","endSecond","endDate","hour","minute","second","dateClick","isEnabled","isEnabled2","isIncludes","formatedDisabledDate","item","forEach","isSame","from","to","before","after","compareMin","compareMax","min","max","renderContent","pickerStyles","classNames","panelProps","minDate","isObject","maxDate","panelComponent","React","createElement","DateRangePanel","DatePanel","timepickerComponent","TimePickerRangePanel","TimePickerPanel","ref","CalendarPresets","onClickRange","Button","theme","variant","onClick","triggerClassName","STATUS","active","defaultSuffixIcon","IconTime","IconCalendar","datePickerClassName","SIZE","Popup","trigger","placement","visible","content","overlayClassName","expandAnimation","destroyOnClose","Input","readonly","onClear","displayName","defaultProps"],"mappings":"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"}