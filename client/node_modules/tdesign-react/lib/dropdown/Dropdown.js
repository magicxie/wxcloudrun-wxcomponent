/**
 * tdesign v0.22.1
 * (c) 2022 tdesign
 * @license MIT
 */

import { _ as _defineProperty } from '../_chunks/dep-9332bbea.js';
import { _ as _slicedToArray } from '../_chunks/dep-93971e86.js';
import React, { useState } from 'react';
import classNames from 'classnames';
import { _ as _arrayMap } from '../_chunks/dep-76c67131.js';
import { _ as _copyObject, a as _getAllKeysIn, b as _baseClone } from '../_chunks/dep-7dc750a9.js';
import { _ as _baseGet, a as _toKey, b as _castPath } from '../_chunks/dep-734d525f.js';
import { _ as _baseSlice } from '../_chunks/dep-3dccad86.js';
import { i as isPlainObject_1 } from '../_chunks/dep-38f29685.js';
import { _ as _flatRest } from '../_chunks/dep-07c9edb2.js';
import useConfig from '../_util/useConfig.js';
import { Popup } from '../popup/index.js';
import DropdownMenu from './DropdownMenu.js';
import '../_chunks/dep-beac373a.js';
import '../_chunks/dep-c6576f8f.js';
import '../_chunks/dep-156c830d.js';
import '../_chunks/dep-04305406.js';
import '../_chunks/dep-7cf92957.js';
import '../_chunks/dep-6ca758b4.js';
import '../_chunks/dep-f99c7286.js';
import '../_chunks/dep-a554e9c2.js';
import '../_chunks/dep-a347fb20.js';
import '../_chunks/dep-b33ecffe.js';
import '../_chunks/dep-055d1d0f.js';
import '../_chunks/dep-060885ed.js';
import '../_chunks/dep-00169190.js';
import '../_chunks/dep-17892822.js';
import '../_chunks/dep-2924d6ff.js';
import '../_chunks/dep-beebb45e.js';
import '../_chunks/dep-8acca302.js';
import '../_chunks/dep-99f6ab64.js';
import '../_chunks/dep-aeb2fb38.js';
import '../_chunks/dep-0268bf88.js';
import '../_chunks/dep-532b8f09.js';
import '../_chunks/dep-6cc953ca.js';
import '../_chunks/dep-cc1bc349.js';
import '../config-provider/ConfigContext.js';
import '../locale/zh_CN.js';
import '../popup/Popup.js';
import 'react-transition-group';
import 'react-popper';
import '../_util/useDefault.js';
import '../_util/noop.js';
import '../_util/composeRefs.js';
import '../_util/usePrevious.js';
import '../popup/Portal.js';
import 'react-dom';
import '../popup/hooks/useTriggerProps.js';
import '../_util/useClickOutside.js';
import '../popup/hooks/usePopupCssTransition.js';
import '../_chunks/dep-124f91c5.js';
import './DropdownItem.js';
import 'tdesign-icons-react';
import '../_util/useRipple.js';
import '../_util/setStyle.js';
import '../_util/helper.js';
import '../_chunks/dep-27d690ce.js';
import '../_chunks/dep-5913685b.js';
import '../_chunks/dep-e7eff919.js';
import '../divider/index.js';
import '../divider/Divider.js';

/**
 * Gets the last element of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {*} Returns the last element of `array`.
 * @example
 *
 * _.last([1, 2, 3]);
 * // => 3
 */

function last$1(array) {
  var length = array == null ? 0 : array.length;
  return length ? array[length - 1] : undefined;
}

var last_1 = last$1;

var baseGet = _baseGet,
    baseSlice = _baseSlice;
/**
 * Gets the parent value at `path` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} path The path to get the parent value of.
 * @returns {*} Returns the parent value.
 */

function parent$1(object, path) {
  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
}

var _parent = parent$1;

var castPath$1 = _castPath,
    last = last_1,
    parent = _parent,
    toKey = _toKey;
/**
 * The base implementation of `_.unset`.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {Array|string} path The property path to unset.
 * @returns {boolean} Returns `true` if the property is deleted, else `false`.
 */

function baseUnset$1(object, path) {
  path = castPath$1(path, object);
  object = parent(object, path);
  return object == null || delete object[toKey(last(path))];
}

var _baseUnset = baseUnset$1;

var isPlainObject = isPlainObject_1;
/**
 * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain
 * objects.
 *
 * @private
 * @param {*} value The value to inspect.
 * @param {string} key The key of the property to inspect.
 * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.
 */

function customOmitClone$1(value) {
  return isPlainObject(value) ? undefined : value;
}

var _customOmitClone = customOmitClone$1;

var arrayMap = _arrayMap,
    baseClone = _baseClone,
    baseUnset = _baseUnset,
    castPath = _castPath,
    copyObject = _copyObject,
    customOmitClone = _customOmitClone,
    flatRest = _flatRest,
    getAllKeysIn = _getAllKeysIn;
/** Used to compose bitmasks for cloning. */

var CLONE_DEEP_FLAG = 1,
    CLONE_FLAT_FLAG = 2,
    CLONE_SYMBOLS_FLAG = 4;
/**
 * The opposite of `_.pick`; this method creates an object composed of the
 * own and inherited enumerable property paths of `object` that are not omitted.
 *
 * **Note:** This method is considerably slower than `_.pick`.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The source object.
 * @param {...(string|string[])} [paths] The property paths to omit.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.omit(object, ['a', 'c']);
 * // => { 'b': '2' }
 */

var omit = flatRest(function (object, paths) {
  var result = {};

  if (object == null) {
    return result;
  }

  var isDeep = false;
  paths = arrayMap(paths, function (path) {
    path = castPath(path, object);
    isDeep || (isDeep = path.length > 1);
    return path;
  });
  copyObject(object, getAllKeysIn(object), result);

  if (isDeep) {
    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
  }

  var length = paths.length;

  while (length--) {
    baseUnset(result, paths[length]);
  }

  return result;
});
var omit_1 = omit;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

var Dropdown = function Dropdown(props) {
  var _props$popupProps = props.popupProps,
      popupProps = _props$popupProps === void 0 ? {} : _props$popupProps,
      disabled = props.disabled,
      _props$placement = props.placement,
      placement = _props$placement === void 0 ? "bottom-left" : _props$placement,
      _props$trigger = props.trigger,
      trigger = _props$trigger === void 0 ? "hover" : _props$trigger,
      _props$className = props.className,
      className = _props$className === void 0 ? "" : _props$className,
      children = props.children,
      _props$hideAfterItemC = props.hideAfterItemClick,
      hideAfterItemClick = _props$hideAfterItemC === void 0 ? true : _props$hideAfterItemC;

  var _useConfig = useConfig(),
      classPrefix = _useConfig.classPrefix;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isPopupVisible = _useState2[0],
      togglePopupVisible = _useState2[1];

  var dropdownClass = "".concat(classPrefix, "-dropdown");

  var handleMenuClick = function handleMenuClick(data, context) {
    var _props$onClick;

    if (hideAfterItemClick) {
      togglePopupVisible(false);
    }

    (_props$onClick = props.onClick) === null || _props$onClick === void 0 ? void 0 : _props$onClick.call(props, data, context);
  };

  var DropdownContent = function DropdownContent() {
    return /* @__PURE__ */React.createElement(DropdownMenu, _objectSpread(_objectSpread({}, props), {}, {
      onClick: handleMenuClick
    }));
  };

  var handleVisibleChange = function handleVisibleChange(visible, context) {
    var _popupProps$onVisible;

    togglePopupVisible(visible);
    popupProps === null || popupProps === void 0 ? void 0 : (_popupProps$onVisible = popupProps.onVisibleChange) === null || _popupProps$onVisible === void 0 ? void 0 : _popupProps$onVisible.call(popupProps, visible, context);
  };

  var popupParams = _objectSpread({
    disabled: disabled,
    placement: placement,
    trigger: trigger,
    showArrow: false,
    overlayClassName: classNames(dropdownClass, className),
    content: DropdownContent()
  }, omit_1(popupProps, "onVisibleChange"));

  return /* @__PURE__ */React.createElement(Popup, _objectSpread({
    expandAnimation: true,
    destroyOnClose: true,
    visible: isPopupVisible,
    onVisibleChange: handleVisibleChange
  }, popupParams), children);
};

Dropdown.displayName = "Dropdown";

export { Dropdown as default };
//# sourceMappingURL=Dropdown.js.map
