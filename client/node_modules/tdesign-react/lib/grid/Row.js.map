{"version":3,"file":"Row.js","sources":["../../src/grid/Row.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport isObject from 'lodash/isObject';\nimport useConfig from '../_util/useConfig';\nimport { StyledProps } from '../common';\nimport { TdRowProps } from './type';\nimport Col from './Col';\n\n/**\n * Row 组件支持的属性。\n */\nexport interface RowProps extends TdRowProps, StyledProps {\n  /**\n   * 默认子元素内容\n   */\n  children: React.ReactNode;\n}\n\nconst calcSize = (width: number) => {\n  let size = 'xs';\n  if (width < 768) {\n    size = 'xs';\n  } else if (width >= 768 && width < 992) {\n    size = 'sm';\n  } else if (width >= 992 && width < 1200) {\n    size = 'md';\n  } else if (width >= 1200 && width < 1400) {\n    size = 'lg';\n  } else if (width >= 1400 && width < 1880) {\n    size = 'xl';\n  } else {\n    size = 'xxl';\n  }\n  return size;\n};\n\nconst calcRowStyle = (gutter: TdRowProps['gutter'], currentSize: string): object => {\n  const rowStyle = {};\n  if (typeof gutter === 'number') {\n    Object.assign(rowStyle, {\n      marginLeft: `${gutter / -2}px`,\n      marginRight: `${gutter / -2}px`,\n    });\n  } else if (Array.isArray(gutter) && gutter.length) {\n    if (typeof gutter[0] === 'number') {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0] / -2}px`,\n        marginRight: `${gutter[0] / -2}px`,\n      });\n    }\n    if (typeof gutter[1] === 'number') {\n      Object.assign(rowStyle, { rowGap: `${gutter[1]}px` });\n    }\n\n    if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0][currentSize] / -2}px`,\n        marginRight: `${gutter[0][currentSize] / -2}px`,\n      });\n    }\n    if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n      Object.assign(rowStyle, { rowGap: `${gutter[1][currentSize]}px` });\n    }\n  } else if (isObject(gutter) && gutter[currentSize]) {\n    if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize][0] / -2}px`,\n        marginRight: `${gutter[currentSize][0] / -2}px`,\n      });\n      Object.assign(rowStyle, { rowGap: `${gutter[currentSize][1]}px` });\n    } else {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize] / -2}px`,\n        marginRight: `${gutter[currentSize] / -2}px`,\n      });\n    }\n  }\n  return rowStyle;\n};\n\n/**\n * Row组件\n */\nconst Row = (props: RowProps) => {\n  const {\n    align = 'top',\n    gutter = 0,\n    justify = 'start',\n    tag = 'div',\n    style: propStyle,\n    className,\n    children,\n    ...otherRowProps\n  } = props;\n\n  const [size, setSize] = useState(calcSize(window.innerWidth));\n\n  const updateSize = () => {\n    const currentSize = calcSize(window.innerWidth);\n    if (currentSize !== size) {\n      setSize(size);\n    }\n  };\n\n  const { classPrefix } = useConfig();\n  const rowClassNames = classNames(`${classPrefix}-row`, className, {\n    [`${classPrefix}-row--${justify}`]: true,\n    [`${classPrefix}-row--${align}`]: true,\n  });\n  const rowStyle = {\n    ...calcRowStyle(gutter, size),\n    ...propStyle,\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSize);\n    return () => {\n      window.removeEventListener('resize', updateSize);\n    };\n  });\n\n  return React.createElement(\n    tag,\n    {\n      className: rowClassNames,\n      style: rowStyle,\n      ...otherRowProps,\n    },\n    React.Children.map(children, (child: React.ReactElement) => {\n      if (child && child.type === Col) {\n        return React.cloneElement(child, { gutter, size });\n      }\n      return child;\n    }),\n  );\n};\n\nRow.displayName = 'Row';\n\nexport default Row;\n"],"names":["calcSize","width","size","calcRowStyle","gutter","currentSize","rowStyle","Object","assign","marginLeft","marginRight","Array","isArray","length","rowGap","isObject","Row","props","align","justify","tag","propStyle","style","className","children","otherRowProps","useState","window","innerWidth","setSize","updateSize","useConfig","classPrefix","rowClassNames","classNames","useEffect","addEventListener","removeEventListener","React","createElement","Children","map","child","type","Col","cloneElement","displayName"],"mappings":"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"}