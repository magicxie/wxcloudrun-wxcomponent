{"version":3,"file":"gradient.js","sources":["../../src/loading/gradient.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, FC } from 'react';\nimport classnames from 'classnames';\n\nimport useConfig from '../_util/useConfig';\n\n/**\n * Loading组件 渐变部分实现\n */\nconst GradientLoading: FC = () => {\n  const { classPrefix } = useConfig();\n  const [styleFromEnv, setStyleFromEnv] = useState({});\n  const conicRef = useRef();\n\n  const gradientClass = `${classPrefix}-loading__gradient`;\n\n  useEffect(() => {\n    const el = conicRef?.current;\n    let basicStyle = {};\n\n    if (el) {\n      const { fontSize, color } = getComputedStyle(el);\n      // to fix the browser compat of foreignObject in Safari,\n      // https://bugs.webkit.org/show_bug.cgi?id=23113\n      const ua = window?.navigator?.userAgent;\n      const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n      if (isSafari) {\n        basicStyle = {\n          transformOrigin: '-1px -1px',\n          transform: `scale(${parseInt(fontSize, 10) / 14})`,\n        };\n      }\n      if (color) {\n        const matched = color.match(/[\\d.]+/g);\n        const endColor = `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)`;\n        setStyleFromEnv({\n          ...basicStyle,\n          background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n        });\n      } else {\n        setStyleFromEnv({\n          ...basicStyle,\n          background: '',\n        });\n      }\n    }\n  }, []);\n\n  return (\n    <svg\n      className={classnames(gradientClass, `${classPrefix}-icon-loading`)}\n      viewBox=\"0 0 14 14\"\n      version=\"1.1\"\n      width=\"1em\"\n      height=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <foreignObject x=\"1\" y=\"1\" width=\"12\" height=\"12\">\n        <div className={`${gradientClass}-conic`} style={styleFromEnv} ref={conicRef} />\n      </foreignObject>\n    </svg>\n  );\n};\nexport default GradientLoading;\n"],"names":["GradientLoading","useConfig","classPrefix","useState","styleFromEnv","setStyleFromEnv","conicRef","useRef","gradientClass","useEffect","el","current","basicStyle","getComputedStyle","fontSize","color","ua","window","navigator","userAgent","isSafari","test","transformOrigin","transform","parseInt","matched","match","endColor","background","React","createElement","className","classnames","viewBox","version","width","height","xmlns","x","y","style","ref"],"mappings":";;;;;;;;;;;;;;;;;;;IAGMA,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,mBAAwBC,SAAS,EAAjC;AAAA,MAAQC,WAAR,cAAQA,WAAR;;AACA,kBAAwCC,QAAQ,CAAC,EAAD,CAAhD;AAAA;AAAA,MAAOC,YAAP;AAAA,MAAqBC,eAArB;;AACA,MAAMC,QAAQ,GAAGC,MAAM,EAAvB;AACA,MAAMC,aAAa,aAAMN,WAAN,uBAAnB;AACAO,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMC,EAAE,GAAGJ,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAEK,OAArB;AACA,QAAIC,UAAU,GAAG,EAAjB;;AACA,QAAIF,EAAJ,EAAQ;AAAA;;AACN,8BAA4BG,gBAAgB,CAACH,EAAD,CAA5C;AAAA,UAAQI,QAAR,qBAAQA,QAAR;AAAA,UAAkBC,KAAlB,qBAAkBA,KAAlB;;AACA,UAAMC,EAAE,cAAGC,MAAH,iEAAG,QAAQC,SAAX,sDAAG,kBAAmBC,SAA9B;AACA,UAAMC,QAAQ,GAAG,SAASC,IAAT,CAAcL,EAAd,KAAqB,CAAC,SAASK,IAAT,CAAcL,EAAd,CAAvC;;AACA,UAAII,QAAJ,EAAc;AACZR,QAAAA,UAAU,GAAG;AACXU,UAAAA,eAAe,EAAE,WADN;AAEXC,UAAAA,SAAS,kBAAWC,QAAQ,CAACV,QAAD,EAAW,EAAX,CAAR,GAAyB,EAApC;AAFE,SAAb;AAID;;AACD,UAAIC,KAAJ,EAAW;AACT,YAAMU,OAAO,GAAGV,KAAK,CAACW,KAAN,CAAY,SAAZ,CAAhB;AACA,YAAMC,QAAQ,kBAAWF,OAAO,CAAC,CAAD,CAAlB,eAA0BA,OAAO,CAAC,CAAD,CAAjC,eAAyCA,OAAO,CAAC,CAAD,CAAhD,SAAd;AACApB,QAAAA,eAAe,iCACVO,UADU;AAEbgB,UAAAA,UAAU,iDAA0CD,QAA1C,oBAA4DZ,KAA5D;AAFG,WAAf;AAID,OAPD,MAOO;AACLV,QAAAA,eAAe,iCACVO,UADU;AAEbgB,UAAAA,UAAU,EAAE;AAFC,WAAf;AAID;AACF;AACF,GA3BQ,EA2BN,EA3BM,CAAT;AA4BA,wBAAuBC,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChDC,IAAAA,SAAS,EAAEC,UAAU,CAACxB,aAAD,YAAmBN,WAAnB,mBAD2B;AAEhD+B,IAAAA,OAAO,EAAE,WAFuC;AAGhDC,IAAAA,OAAO,EAAE,KAHuC;AAIhDC,IAAAA,KAAK,EAAE,KAJyC;AAKhDC,IAAAA,MAAM,EAAE,KALwC;AAMhDC,IAAAA,KAAK,EAAE;AANyC,GAA3B,iBAOJR,KAAK,CAACC,aAAN,CAAoB,eAApB,EAAqC;AACtDQ,IAAAA,CAAC,EAAE,GADmD;AAEtDC,IAAAA,CAAC,EAAE,GAFmD;AAGtDJ,IAAAA,KAAK,EAAE,IAH+C;AAItDC,IAAAA,MAAM,EAAE;AAJ8C,GAArC,iBAKAP,KAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC5CC,IAAAA,SAAS,YAAKvB,aAAL,WADmC;AAE5CgC,IAAAA,KAAK,EAAEpC,YAFqC;AAG5CqC,IAAAA,GAAG,EAAEnC;AAHuC,GAA3B,CALA,CAPI,CAAvB;AAiBD;;;;"}