{"version":3,"file":"plugin.js","sources":["../../src/loading/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Loading from './loading';\nimport { LoadingMethod, TdLoadingProps } from './type';\n\nfunction createContainer(attach?: TdLoadingProps['attach']) {\n  if (typeof attach === 'string') return document.querySelector(attach);\n  if (typeof attach === 'function') return attach();\n  return document.body;\n}\n\n// loading plugin形式\nexport const LoadingPlugin: LoadingMethod = (options) => {\n  if (options === false) return { hide: () => null };\n\n  const props = typeof options === 'boolean' ? {} : options;\n  const { attach } = props;\n  const container = createContainer(attach);\n  const div = document.createElement('div');\n  div.setAttribute('style', 'width: 100%; height: 100%; position: absolute; top: 0;');\n\n  const defaultProps = {\n    loading: true,\n    attach: null,\n    fullscreen: !attach,\n    showOverlay: !!attach,\n  };\n\n  ReactDOM.render(<Loading {...defaultProps} {...props} attach={null}></Loading>, div);\n\n  container.appendChild(div);\n\n  return {\n    hide: () => {\n      ReactDOM.unmountComponentAtNode(div);\n      div.remove();\n    },\n  };\n};\n\nexport const loading = LoadingPlugin;\n"],"names":["createContainer","attach","document","querySelector","body","LoadingPlugin","options","hide","props","container","div","createElement","setAttribute","defaultProps","loading","fullscreen","showOverlay","ReactDOM","render","React","Loading","appendChild","unmountComponentAtNode","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAASA,eAAT,CAAyBC,MAAzB,EAAiC;AAC/B,MAAI,OAAOA,MAAP,KAAkB,QAAtB,EACE,OAAOC,QAAQ,CAACC,aAAT,CAAuBF,MAAvB,CAAP;AACF,MAAI,OAAOA,MAAP,KAAkB,UAAtB,EACE,OAAOA,MAAM,EAAb;AACF,SAAOC,QAAQ,CAACE,IAAhB;AACD;;IACYC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAa;AACxC,MAAIA,OAAO,KAAK,KAAhB,EACE,OAAO;AAAEC,IAAAA,IAAI,EAAE;AAAA,aAAM,IAAN;AAAA;AAAR,GAAP;AACF,MAAMC,KAAK,GAAG,OAAOF,OAAP,KAAmB,SAAnB,GAA+B,EAA/B,GAAoCA,OAAlD;AACA,MAAQL,MAAR,GAAmBO,KAAnB,CAAQP,MAAR;AACA,MAAMQ,SAAS,GAAGT,eAAe,CAACC,MAAD,CAAjC;AACA,MAAMS,GAAG,GAAGR,QAAQ,CAACS,aAAT,CAAuB,KAAvB,CAAZ;AACAD,EAAAA,GAAG,CAACE,YAAJ,CAAiB,OAAjB,EAA0B,wDAA1B;AACA,MAAMC,YAAY,GAAG;AACnBC,IAAAA,OAAO,EAAE,IADU;AAEnBb,IAAAA,MAAM,EAAE,IAFW;AAGnBc,IAAAA,UAAU,EAAE,CAACd,MAHM;AAInBe,IAAAA,WAAW,EAAE,CAAC,CAACf;AAJI,GAArB;AAMAgB,EAAAA,QAAQ,CAACC,MAAT,iBAAgCC,KAAK,CAACR,aAAN,CAAoBS,OAApB,gDAC3BP,YAD2B,GAE3BL,KAF2B;AAG9BP,IAAAA,MAAM,EAAE;AAHsB,KAAhC,EAIIS,GAJJ;AAKAD,EAAAA,SAAS,CAACY,WAAV,CAAsBX,GAAtB;AACA,SAAO;AACLH,IAAAA,IAAI,EAAE,gBAAM;AACVU,MAAAA,QAAQ,CAACK,sBAAT,CAAgCZ,GAAhC;AACAA,MAAAA,GAAG,CAACa,MAAJ;AACD;AAJI,GAAP;AAMD;IACYT,OAAO,GAAGT;;;;"}