{"version":3,"file":"HeadMenu.js","sources":["../../src/menu/HeadMenu.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport isObject from 'lodash/isObject';\nimport Tabs from '../tabs';\nimport { StyledProps } from '../common';\nimport { TdHeadMenuProps } from './type';\nimport useConfig from '../_util/useConfig';\nimport useMenuContext from './hooks/useMenuContext';\nimport { MenuContext } from './MenuContext';\nimport checkSubMenuActive from './_util/checkSubMenuActive';\n\nconst { TabPanel } = Tabs;\n\nexport interface HeadMenuProps extends TdHeadMenuProps, StyledProps {}\n\nconst HeadMenu: FC<HeadMenuProps> = (props) => {\n  const { children, className, theme = 'light', style, logo, operations } = props;\n  const { classPrefix } = useConfig();\n  const { value } = useMenuContext({ ...props, children, mode: 'title' });\n\n  const childs: ReactElement[] | null = useMemo(() => {\n    if (value.expandType === 'popup') return null;\n    const activeMenu: ReactElement = checkSubMenuActive(children, value.active);\n    if (!activeMenu) return null;\n    const child = activeMenu.props.children;\n    if (Array.isArray(child)) return child;\n    if (isObject(child)) return [child];\n    return activeMenu.props.children;\n  }, [children, value.expandType, value.active]);\n\n  const currentChildsValues = childs?.length > 0 ? childs.map((item) => item.props.value) : [];\n\n  return (\n    <MenuContext.Provider value={value}>\n      <div\n        className={classNames(className, `${classPrefix}-head-menu`, `${classPrefix}-menu--${theme}`)}\n        style={{ ...style }}\n      >\n        <div className={`${classPrefix}-head-menu__inner`}>\n          {logo && <div className={`${classPrefix}-menu__logo`}>{logo}</div>}\n          <ul className={`${classPrefix}-menu`}>{children}</ul>\n          {operations && <div className={`${classPrefix}-menu__operations`}>{operations}</div>}\n        </div>\n        {childs?.length > 0 && (\n          <ul className={`${classPrefix}-head-menu__submenu ${classPrefix}-submenu`}>\n            <Tabs\n              value={currentChildsValues.includes(value.active) ? value.active : currentChildsValues[0]}\n              onChange={value.onChange}\n            >\n              {childs.map(({ props }) => (\n                <TabPanel value={props.value} key={props.value} label={props.children}></TabPanel>\n              ))}\n            </Tabs>\n          </ul>\n        )}\n      </div>\n    </MenuContext.Provider>\n  );\n};\n\nexport default HeadMenu;\n"],"names":["TabPanel","Tabs","HeadMenu","props","children","className","theme","style","logo","operations","useConfig","classPrefix","useMenuContext","mode","value","childs","useMemo","expandType","activeMenu","checkSubMenuActive","active","child","Array","isArray","isObject","currentChildsValues","length","map","item","React","createElement","MenuContext","Provider","classNames","includes","onChange","props2","key","label"],"mappings":"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"}