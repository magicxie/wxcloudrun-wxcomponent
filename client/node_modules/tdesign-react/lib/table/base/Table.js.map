{"version":3,"file":"Table.js","sources":["../../../node_modules/lodash/throttle.js","../../../src/table/base/Table.tsx"],"sourcesContent":["var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import React, { useMemo, useState, ReactNode, useLayoutEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport debounce from 'lodash/debounce';\nimport useUpdateEffect from '../../_util/useUpdateEffect';\nimport useConfig from '../../_util/useConfig';\nimport { DataType, TdPrimaryTableProps } from '../type';\nimport Pagination, { PageInfo } from '../../pagination';\nimport { useColumns } from '../hooks/useColumns';\nimport { getScrollDirection, ScrollDirection } from '../util';\nimport TableEmptyBody from './TableEmptyBody';\nimport TableHeader from './TableHeader';\nimport TableBody from './TableBody';\nimport TableLoadingBody from './TableLoadingBody';\nimport TableAsyncLoadingBody from './TableAsyncLoadingBody';\nimport { TableContextProvider } from './TableContext';\nimport { TableColGroup } from './TableColGroup';\nimport TableFooter from './TableFooter';\nimport Loading from '../../loading';\n\nexport type BaseTableProps<RowData extends DataType = DataType> = TdPrimaryTableProps<RowData>;\nexport interface ExpandInnerProps {\n  handleExpandChange?: Function;\n  renderExpandRow?: Function;\n}\n\nexport default function BaseTable<D extends DataType = DataType>(props: BaseTableProps<D> & ExpandInnerProps) {\n  const { classPrefix } = useConfig();\n\n  const {\n    bordered = false,\n    stripe = false,\n    hover = false,\n    tableLayout = 'fixed',\n    verticalAlign = 'center',\n    size = 'medium',\n    maxHeight,\n    height,\n    loading,\n    empty,\n    data = [],\n    pagination,\n    onPageChange,\n    onScrollX,\n    onScrollY,\n    asyncLoading,\n  } = props;\n\n  const [columns, flattenColumns] = useColumns(props);\n\n  // ==================== 翻页 ====================\n  let hasPagination = false;\n  const [innerCurrent, setInnerCurrentPagination] = useState<number>(\n    pagination?.current || pagination?.defaultCurrent || 1,\n  );\n  const [innerPageSize, setInnerPageSize] = useState<number>(pagination?.pageSize || pagination?.defaultPageSize || 10);\n  const isControlledPagination =\n    typeof pagination?.current !== 'undefined' && typeof pagination?.pageSize !== 'undefined';\n\n  useUpdateEffect(() => {\n    if (isControlledPagination) {\n      setInnerCurrentPagination(pagination?.current);\n      setInnerPageSize(pagination?.pageSize);\n    }\n  }, [pagination]);\n\n  const onPageSizeChange = (pageSize: number, pageInfo: PageInfo) => {\n    pagination?.onPageSizeChange?.(pageSize, pageInfo);\n  };\n\n  if (pagination) {\n    const { total, showJumper } = pagination;\n    hasPagination = total > innerPageSize || (showJumper && total <= innerPageSize);\n  }\n\n  const onInnerPaginationChange = (pageInfo: PageInfo) => {\n    const { current, pageSize } = pageInfo;\n\n    const newDataSource = data.slice((current - 1) * pageSize, current * pageSize);\n    onPageChange?.(pageInfo, newDataSource);\n    // 处理pagination参数的事件回调\n    pagination?.onChange?.(pageInfo);\n\n    if (!isControlledPagination) {\n      setInnerCurrentPagination(current);\n      setInnerPageSize(pageSize);\n    }\n  };\n\n  // ==================== 数据 ====================\n  const pageData = useMemo(() => {\n    if (!hasPagination) return data;\n    if (data.length > innerPageSize) {\n      const pageStart = (innerCurrent - 1) * innerPageSize;\n      const pageEnd = innerCurrent * innerPageSize;\n      return data.slice(pageStart, pageEnd);\n    }\n    return data;\n  }, [data, innerPageSize, hasPagination, innerCurrent]);\n\n  // ==================== 固定表头、固定列 ====================\n  const [scrollBarWidth, setScrollBarWidth] = useState(0);\n  const fixedHeader = height > 0 || maxHeight > 0;\n  const table = useMemo(() => ({ fixedHeader, flattenColumns }), [fixedHeader, flattenColumns]);\n  const hasFixedColumns = columns.some(({ fixed }) => ['left', 'right'].includes(fixed));\n  const scrollHeaderRef = useRef<HTMLDivElement>();\n  const scrollBodyRef = useRef<HTMLDivElement>();\n  const tableRef = useRef<HTMLTableElement>();\n  const tableContentRef = useRef<HTMLDivElement>();\n  const [scrollableToLeft, setScrollableToLeft] = useState(false);\n  const [scrollableToRight, setScrollableToRight] = useState(false);\n  const [isHasScrollbar, setIsHasScrollbar] = useState(false);\n\n  useLayoutEffect(() => {\n    if (fixedHeader) {\n      setStateScrollBarWidth();\n    }\n  }, [fixedHeader]);\n  useLayoutEffect(() => {\n    if (fixedHeader) {\n      const limitHeight = height || maxHeight;\n      const tableNode = tableRef.current;\n      const isHasScrollbarNew = tableNode.offsetHeight > limitHeight;\n      setIsHasScrollbar(isHasScrollbarNew);\n    }\n  }, [pageData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useLayoutEffect(() => {\n    let checkScrollableToLeftOrRightDebounce: EventListenerOrEventListenerObject | undefined;\n    if (hasFixedColumns) {\n      checkScrollableToLeftOrRight();\n      checkScrollableToLeftOrRightDebounce = debounce(checkScrollableToLeftOrRight);\n      window.addEventListener('resize', checkScrollableToLeftOrRightDebounce);\n    }\n\n    return () => {\n      if (hasFixedColumns) {\n        window.removeEventListener('resize', checkScrollableToLeftOrRightDebounce);\n      }\n    };\n  }, [hasFixedColumns]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // ==================== render ====================\n  const isEmpty = !data.length;\n  function renderTableBodyAndTableFooter() {\n    // eslint-disable-next-line\n    if (!!loading) {\n      return isEmpty ? (\n        <TableFooter>\n          <TableEmptyBody empty={null} />\n        </TableFooter>\n      ) : (\n        <TableBody {...props} data={pageData} />\n      );\n    }\n    // eslint-disable-next-line\n    if (!!asyncLoading) {\n      return (\n        <>\n          <TableBody {...props} data={pageData} />\n          <TableFooter colspan={columns.length}>\n            <TableAsyncLoadingBody {...props} />\n          </TableFooter>\n        </>\n      );\n    }\n    if (isEmpty) {\n      return (\n        <TableFooter>\n          <TableEmptyBody empty={empty} />\n        </TableFooter>\n      );\n    }\n\n    return <TableBody {...props} data={pageData} />;\n  }\n\n  let paginationNode: ReactNode;\n  if (hasPagination) {\n    paginationNode = (\n      <div className={`${classPrefix}-table__pagination`}>\n        <Pagination\n          {...pagination}\n          current={innerCurrent}\n          pageSize={innerPageSize}\n          onChange={onInnerPaginationChange}\n          onPageSizeChange={onPageSizeChange}\n        />\n      </div>\n    );\n  }\n\n  function getTable(params?: { enableHeader?: boolean; enableBody?: boolean }): ReactNode {\n    const { enableHeader = true, enableBody = true } = params || {};\n    return (\n      <table ref={tableRef} style={{ tableLayout, height: '100%' }}>\n        <TableColGroup columns={columns} />\n        {enableHeader ? <TableHeader<D> columns={columns} /> : null}\n        {enableBody ? renderTableBodyAndTableFooter() : null}\n      </table>\n    );\n  }\n\n  function getTableWithFixedHeader(): ReactNode {\n    let style = {};\n    if (isHasScrollbar) {\n      style = { ...style, paddingRight: scrollBarWidth };\n    }\n    const fixedHeaderRN = (\n      <div ref={scrollHeaderRef} className={`${classPrefix}-table__header`} style={style}>\n        {getTable({ enableBody: false })}\n      </div>\n    );\n\n    const onScroll = (e) => {\n      const { scrollLeft } = e.target;\n      scrollHeaderRef.current.scrollLeft = scrollLeft;\n      handleScroll(e, 10);\n    };\n\n    const fixedBodyRN = (\n      <div\n        ref={scrollBodyRef}\n        className={`${classPrefix}-table__body`}\n        style={{\n          height: isNaN(Number(height)) ? height : `${Number(height)}px`,\n          maxHeight: isNaN(Number(maxHeight)) ? maxHeight : `${Number(maxHeight)}px`,\n          width: hasFixedColumns ? '100%' : undefined,\n        }}\n        {...(hasFixedColumns ? { onScroll } : {})}\n      >\n        {getTable({ enableHeader: false })}\n      </div>\n    );\n\n    return (\n      <>\n        {fixedHeaderRN}\n        {fixedBodyRN}\n      </>\n    );\n  }\n\n  // ==================== functions ====================\n  function setStateScrollBarWidth() {\n    const scrollDiv = document.createElement('div');\n    scrollDiv.style.cssText = `\n      width: 99px;\n      height: 99px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;`;\n    scrollDiv.classList.add('scrollbar');\n    document.body.appendChild(scrollDiv);\n    const scrollBarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    setScrollBarWidth(scrollBarWidth);\n    document.body.removeChild(scrollDiv);\n  }\n\n  function checkScrollableToLeftOrRight() {\n    const scrollContainer = fixedHeader ? scrollBodyRef.current : tableContentRef.current;\n    const { scrollLeft, scrollWidth, clientWidth } = scrollContainer;\n    const scrollableToLeft = scrollLeft > 0;\n    setScrollableToLeft(scrollableToLeft);\n    const scrollableToRight = scrollLeft + clientWidth < scrollWidth;\n    setScrollableToRight(scrollableToRight);\n  }\n\n  function handleScroll(e, duration = 100) {\n    const { scrollLeft, scrollTop } = e.target;\n\n    const scrollFn = throttle(() => {\n      checkScrollableToLeftOrRight();\n      const direction = getScrollDirection(scrollLeft, scrollTop);\n      if (direction !== ScrollDirection.UNKNOWN) {\n        const scrollListenerFn = direction === ScrollDirection.X ? onScrollX : onScrollY;\n        const scrollParams = { e };\n        scrollListenerFn?.(scrollParams);\n      }\n    }, duration);\n    scrollFn();\n  }\n\n  return (\n    <div\n      className={classNames(`${classPrefix}-table`, {\n        [`${classPrefix}-table--striped`]: stripe,\n        [`${classPrefix}-table--bordered`]: bordered,\n        [`${classPrefix}-size-l`]: size === 'large',\n        [`${classPrefix}-size-s`]: size === 'small',\n        [`${classPrefix}-table--hoverable`]: hover,\n        [`${classPrefix}-table--align-${verticalAlign}`]: verticalAlign,\n        [`${classPrefix}-table__header--fixed`]: fixedHeader,\n        [`${classPrefix}-table__cell--fixed ${classPrefix}-table--has-fixed`]: hasFixedColumns,\n      })}\n    >\n      <TableContextProvider value={table}>\n        <Loading\n          loading={!!loading}\n          showOverlay\n          indicator={loading === true}\n          text={typeof loading !== 'boolean' ? <TableLoadingBody {...props} /> : null}\n        >\n          <div\n            ref={tableContentRef}\n            className={classNames(`${classPrefix}-table__content`, {\n              [`${classPrefix}-table__content--scrollable-to-right`]: scrollableToRight,\n              [`${classPrefix}-table__content--scrollable-to-left`]: scrollableToLeft,\n            })}\n            style={{ overflow: 'auto' }}\n            {...(hasFixedColumns ? { onScroll: handleScroll } : {})}\n          >\n            {!fixedHeader ? getTable() : getTableWithFixedHeader()}\n          </div>\n        </Loading>\n        {hasPagination && paginationNode}\n      </TableContextProvider>\n    </div>\n  );\n}\n"],"names":["debounce","require$$0","isObject","require$$1","FUNC_ERROR_TEXT","throttle","func","wait","options","leading","trailing","TypeError","throttle_1","BaseTable","props","useConfig","classPrefix","bordered","stripe","hover","tableLayout","verticalAlign","size","maxHeight","height","loading","empty","data","pagination","onPageChange","onScrollX","onScrollY","asyncLoading","useColumns","columns","flattenColumns","hasPagination","useState","current","defaultCurrent","innerCurrent","setInnerCurrentPagination","pageSize","defaultPageSize","innerPageSize","setInnerPageSize","isControlledPagination","useUpdateEffect","onPageSizeChange","pageInfo","total","showJumper","onInnerPaginationChange","newDataSource","slice","onChange","pageData","useMemo","length","pageStart","pageEnd","scrollBarWidth","setScrollBarWidth","fixedHeader","table","hasFixedColumns","some","fixed","includes","scrollHeaderRef","useRef","scrollBodyRef","tableRef","tableContentRef","scrollableToLeft","setScrollableToLeft","scrollableToRight","setScrollableToRight","isHasScrollbar","setIsHasScrollbar","useLayoutEffect","setStateScrollBarWidth","limitHeight","tableNode","isHasScrollbarNew","offsetHeight","checkScrollableToLeftOrRightDebounce","checkScrollableToLeftOrRight","window","addEventListener","removeEventListener","isEmpty","renderTableBodyAndTableFooter","React","createElement","TableFooter","TableEmptyBody","TableBody","Fragment","colspan","TableAsyncLoadingBody","paginationNode","className","Pagination","getTable","params","enableHeader","enableBody","ref","style","TableColGroup","TableHeader","getTableWithFixedHeader","paddingRight","fixedHeaderRN","onScroll","e","scrollLeft","target","handleScroll","fixedBodyRN","isNaN","Number","width","scrollDiv","document","cssText","classList","add","body","appendChild","scrollBarWidth2","offsetWidth","clientWidth","removeChild","scrollContainer","scrollWidth","scrollableToLeft2","scrollableToRight2","duration","scrollTop","scrollFn","direction","getScrollDirection","ScrollDirection","UNKNOWN","scrollListenerFn","X","scrollParams","classNames","TableContextProvider","value","Loading","showOverlay","indicator","text","TableLoadingBody","overflow"],"mappings":"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"}