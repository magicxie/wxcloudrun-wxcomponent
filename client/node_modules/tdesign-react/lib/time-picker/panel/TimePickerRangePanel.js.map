{"version":3,"file":"TimePickerRangePanel.js","sources":["../../../src/time-picker/panel/TimePickerRangePanel.tsx"],"sourcesContent":["import React, { FC, useMemo } from 'react';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\n\nimport SinglePanel, { SinglePanelProps } from './SinglePanel';\n\nimport useConfig from '../../_util/useConfig';\nimport Button from '../../button';\n\nimport { DEFAULT_STEPS, DEFAULT_FORMAT, useTimePickerTextConfig } from '../consts';\n\nimport { TdTimeRangePickerProps, TimeRangeValue } from '../type';\n\nexport interface TimeRangePickerPanelProps extends Omit<SinglePanelProps, 'value' | 'onChange'> {\n  // 是否展示footer\n  isFooterDisplay?: boolean;\n  handleConfirmClick?: (value: TimeRangeValue) => void;\n  value: TdTimeRangePickerProps['value'];\n  onChange: TdTimeRangePickerProps['onChange'];\n}\n\nconst TimePickerPanel: FC<TimeRangePickerPanelProps> = (props) => {\n  const {\n    value = [],\n    onChange,\n    isFooterDisplay,\n    handleConfirmClick,\n    steps = DEFAULT_STEPS,\n    format = DEFAULT_FORMAT,\n  } = props;\n\n  const TEXT_CONFIG = useTimePickerTextConfig();\n\n  const { classPrefix } = useConfig();\n\n  const [startTime, endTime] = value || [];\n  const panelClassName = `${classPrefix}-time-picker__panel`;\n\n  const handlePanelValueChange = (value: string, index: number) => {\n    if (index === 0) {\n      onChange([value, endTime || value]);\n    } else {\n      const calStartTime = startTime || dayjs().hour(0).minute(0).second(0).format(format);\n      onChange([calStartTime, value]);\n    }\n  };\n\n  const defaultValue = useMemo(() => {\n    if (value && value.length === 0) {\n      return [dayjs().format(format), dayjs().format(format)];\n    }\n    return value;\n  }, [value, format]);\n\n  return (\n    <div className={classNames(panelClassName, `${panelClassName}-section`)}>\n      <div className={`${panelClassName}-section-body`}>\n        <SinglePanel\n          {...props}\n          steps={steps}\n          format={format}\n          value={startTime}\n          onChange={(v) => handlePanelValueChange(v, 0)}\n        />\n        <SinglePanel\n          {...props}\n          steps={steps}\n          format={format}\n          value={endTime}\n          onChange={(v) => handlePanelValueChange(v, 1)}\n        />\n      </div>\n      {isFooterDisplay ? (\n        <div className={`${panelClassName}-section-footer`}>\n          <Button\n            theme=\"primary\"\n            variant=\"base\"\n            onClick={() => {\n              handleConfirmClick(defaultValue);\n            }}\n          >\n            {TEXT_CONFIG.confirm}\n          </Button>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default TimePickerPanel;\n"],"names":["TimePickerPanel","props","value","onChange","isFooterDisplay","handleConfirmClick","steps","DEFAULT_STEPS","format","DEFAULT_FORMAT","TEXT_CONFIG","useTimePickerTextConfig","useConfig","classPrefix","startTime","endTime","panelClassName","handlePanelValueChange","value2","index","calStartTime","dayjs","hour","minute","second","defaultValue","useMemo","length","React","createElement","className","classNames","SinglePanel","v","Button","theme","variant","onClick","confirm"],"mappings":"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"}