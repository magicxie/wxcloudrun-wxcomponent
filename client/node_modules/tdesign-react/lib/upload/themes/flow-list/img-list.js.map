{"version":3,"file":"img-list.js","sources":["../../../../src/upload/themes/flow-list/img-list.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport { BrowseIcon, DeleteIcon, ErrorCircleFilledIcon } from 'tdesign-icons-react';\nimport React, { MouseEvent } from 'react';\nimport type { CommonListProps, FlowListProps } from './index';\nimport useConfig from '../../../_util/useConfig';\nimport { abridgeName } from '../../util';\nimport Loading from '../../../loading';\n\ntype ImgListProps = CommonListProps & Pick<FlowListProps, 'onImgPreview' | 'remove'>;\n\nconst ImgList = (props: ImgListProps) => {\n  const { showInitial, listFiles, renderDragger, onImgPreview, remove } = props;\n  const { classPrefix: prefix } = useConfig();\n  const UPLOAD_NAME = `${prefix}-upload`;\n  const UPLOAD_NAME_CARD = `${UPLOAD_NAME}__card`;\n\n  return (\n    <div className={`${UPLOAD_NAME}__flow-card-area`}>\n      {showInitial && renderDragger()}\n      {!!listFiles.length && (\n        <ul className={`${UPLOAD_NAME_CARD} clearfix`}>\n          {listFiles.map((file, index) => (\n            <li className={`${UPLOAD_NAME_CARD}-item`} key={index}>\n              <div\n                className={classNames({\n                  [`${UPLOAD_NAME_CARD}-content`]: true,\n                  [`${UPLOAD_NAME_CARD}-content-border`]: file.status !== 'waiting',\n                })}\n              >\n                {file.status === 'fail' && (\n                  <div className={`${UPLOAD_NAME_CARD}-status-wrap`}>\n                    <ErrorCircleFilledIcon />\n                    <p>上传失败</p>\n                  </div>\n                )}\n                {file.status === 'progress' && (\n                  <div className={`${UPLOAD_NAME_CARD}-status-wrap`}>\n                    <Loading />\n                    <p>上传中 {Math.min(file.percent, 99)}</p>\n                  </div>\n                )}\n                {(['waiting', 'success'].includes(file.status) || (!file.status && file.url)) && (\n                  <img\n                    className={`${UPLOAD_NAME_CARD}-image`}\n                    src={file.url || '//tdesign.gtimg.com/tdesign-default-img.png'}\n                    alt=\"\"\n                  />\n                )}\n                <div className={`${UPLOAD_NAME_CARD}-mask`}>\n                  {file.url && (\n                    <span className={`${UPLOAD_NAME_CARD}__mask__item`}>\n                      <BrowseIcon onClick={(e: MouseEvent) => onImgPreview(e, file)} />\n                      <span className={`${UPLOAD_NAME_CARD}__mask__item-divider`} />\n                    </span>\n                  )}\n                  <span\n                    className={`${UPLOAD_NAME_CARD}-mask__item`}\n                    onClick={(e: MouseEvent<HTMLElement>) => remove({ e, index, file })}\n                  >\n                    <DeleteIcon />\n                  </span>\n                </div>\n              </div>\n              <p className={`${UPLOAD_NAME_CARD}-name`}>{abridgeName(file.name)}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default ImgList;\n"],"names":["ImgList","props","showInitial","listFiles","renderDragger","onImgPreview","remove","useConfig","prefix","classPrefix","UPLOAD_NAME","UPLOAD_NAME_CARD","React","createElement","className","length","map","file","index","key","classNames","status","ErrorCircleFilledIcon","Loading","Math","min","percent","includes","url","src","alt","BrowseIcon","onClick","e","DeleteIcon","abridgeName","name"],"mappings":"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"}